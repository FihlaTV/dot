!function(){!function(t){function i(i){return"function"==typeof l[i]&&(l[i]=l[i](t,a,u)),l[i]}function s(i,n,s){l[i]=s?n(t,a,u):n}function r(t,i){var n=!1,s=t.charAt(0).toUpperCase()+t.slice(1),r=m.length,e=i.style;if("string"==typeof e[t])n=!0;else for(;r--;)if("string"==typeof e[m[r]+s]){n=!0;break}return n}function e(t){if(t)for(;t.lastChild;)t.removeChild(t.lastChild);return t}function h(t,i){var n=typeof t[i];return"object"==n?!!t[i]:!o[n]}var o={"boolean":1,number:1,string:1,undefined:1},m=["Webkit","Moz","O","ms","Khtml"],a=h(t,"document")&&t.document,u=a&&h(a,"createElement")&&a.createElement("DiV"),c="object"==typeof exports&&exports,f="object"==typeof module&&module,l={};i.add=s,i.clearElement=e,i.cssprop=r,i.isHostType=h,i._tests=l,i.add("dom",function(t,i,n){return i&&n&&h(t,"location")&&h(i,"documentElement")&&h(i,"getElementById")&&h(i,"getElementsByName")&&h(i,"getElementsByTagName")&&h(i,"createComment")&&h(i,"createElement")&&h(i,"createTextNode")&&h(n,"appendChild")&&h(n,"insertBefore")&&h(n,"removeChild")&&h(n,"getAttribute")&&h(n,"setAttribute")&&h(n,"removeAttribute")&&h(n,"style")&&"string"==typeof n.style.cssText});try{document.execCommand("BackgroundImageCache",!1,!0)}catch(x){}"function"==typeof n&&"object"==typeof n.amd&&n.amd?n("has",function(){return i}):c?f&&f.exports==c?(f.exports=i).has=i:c.has=i:t.has=i}(this);var t,i,n;!function(s){function r(t,i){return T.call(t,i)}function e(t,i){var n,s,r,e,h,o,m,a,u,c,f=i&&i.split("/"),l=v.map,x=l&&l["*"]||{};if(t&&"."===t.charAt(0))if(i){for(f=f.slice(0,f.length-1),t=f.concat(t.split("/")),a=0;a<t.length;a+=1)if(c=t[a],"."===c)t.splice(a,1),a-=1;else if(".."===c){if(1===a&&(".."===t[2]||".."===t[0]))break;a>0&&(t.splice(a-1,2),a-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((f||x)&&l){for(n=t.split("/"),a=n.length;a>0;a-=1){if(s=n.slice(0,a).join("/"),f)for(u=f.length;u>0;u-=1)if(r=l[f.slice(0,u).join("/")],r&&(r=r[s])){e=r,h=a;break}if(e)break;!o&&x&&x[s]&&(o=x[s],m=a)}!e&&o&&(e=o,h=m),e&&(n.splice(0,h,e),t=n.join("/"))}return t}function h(t,i){return function(){return l.apply(s,g.call(arguments,0).concat([t,i]))}}function o(t){return function(i){return e(i,t)}}function m(t){return function(i){p[t]=i}}function a(t){if(r(y,t)){var i=y[t];delete y[t],w[t]=!0,f.apply(s,i)}if(!r(p,t)&&!r(w,t))throw new Error("No "+t);return p[t]}function u(t){var i,n=t?t.indexOf("!"):-1;return n>-1&&(i=t.substring(0,n),t=t.substring(n+1,t.length)),[i,t]}function c(t){return function(){return v&&v.config&&v.config[t]||{}}}var f,l,x,d,p={},y={},v={},w={},T=Object.prototype.hasOwnProperty,g=[].slice;x=function(t,i){var n,s=u(t),r=s[0];return t=s[1],r&&(r=e(r,i),n=a(r)),r?t=n&&n.normalize?n.normalize(t,o(i)):e(t,i):(t=e(t,i),s=u(t),r=s[0],t=s[1],r&&(n=a(r))),{f:r?r+"!"+t:t,n:t,pr:r,p:n}},d={require:function(t){return h(t)},exports:function(t){var i=p[t];return"undefined"!=typeof i?i:p[t]={}},module:function(t){return{id:t,uri:"",exports:p[t],config:c(t)}}},f=function(t,i,n,e){var o,u,c,f,l,v,T=[];if(e=e||t,"function"==typeof n){for(i=!i.length&&n.length?["require","exports","module"]:i,l=0;l<i.length;l+=1)if(f=x(i[l],e),u=f.f,"require"===u)T[l]=d.require(t);else if("exports"===u)T[l]=d.exports(t),v=!0;else if("module"===u)o=T[l]=d.module(t);else if(r(p,u)||r(y,u)||r(w,u))T[l]=a(u);else{if(!f.p)throw new Error(t+" missing "+u);f.p.load(f.n,h(e,!0),m(u),{}),T[l]=p[u]}c=n.apply(p[t],T),t&&(o&&o.exports!==s&&o.exports!==p[t]?p[t]=o.exports:c===s&&v||(p[t]=c))}else t&&(p[t]=n)},t=i=l=function(t,i,n,r,e){return"string"==typeof t?d[t]?d[t](i):a(x(t,i).f):(t.splice||(v=t,i.splice?(t=i,i=n,n=null):t=s),i=i||function(){},"function"==typeof n&&(n=r,r=e),r?f(s,t,i,n):setTimeout(function(){f(s,t,i,n)},4),l)},l.config=function(t){return v=t,v.deps&&l(v.deps,v.callback),l},t._defined=p,n=function(t,i,n){i.splice||(n=i,i=[]),r(p,t)||r(y,t)||(y[t]=[t,i,n])},n.amd={jQuery:!0}}(),n("almond",function(){}),n("PHET_CORE/phetAllocation",["require"],function(){return function(t){if(window.alloc){var i;try{throw new Error}catch(n){i=n.stack}window.alloc[t]||(window.alloc[t]={count:0,stacks:{}});var s=window.alloc[t];s.count++,s.stacks[i]?s.stacks[i]+=1:s.stacks[i]=1,s.report=function(){var t=Object.keys(s.stacks);t=_.sortBy(t,function(t){return s.stacks[t]}),_.each(t,function(t){console.log(s.stacks[t]+": "+t)})}}}}),n("DOT/dot",["require","PHET_CORE/phetAllocation"],function(t){window.phetAllocation=t("PHET_CORE/phetAllocation");var i=function n(){switch(arguments.length){case 2:return new n.Vector2(arguments[0],arguments[1]);case 3:return new n.Vector3(arguments[0],arguments[1],arguments[2]);case 4:return new n.Vector4(arguments[0],arguments[1],arguments[2],arguments[3]);default:throw new Error("dot takes 2-4 arguments")}};return i.FastArray=window.Float64Array?window.Float64Array:window.Array,i.assert=null,i}),n("PHET_CORE/extend",["require"],function(){return function(t){return _.each(Array.prototype.slice.call(arguments,1),function(i){if(i)for(var n in i)Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))}),t}}),n("PHET_CORE/inherit",["require","PHET_CORE/extend"],function(t){function i(t,i,s,r){function e(){}return e.prototype=t.prototype,i.prototype=n(new e,{constructor:i},s),n(i,r),i}var n=t("PHET_CORE/extend");return i}),n("PHET_CORE/Poolable",["require","PHET_CORE/extend"],function(t){var i=t("PHET_CORE/extend");return function(t,n){var s=t.prototype;n=i({maxPoolSize:50,initialSize:0},n);var r=t.pool=[];n.defaultFactory&&(t.dirtyFromPool=function(){return r.length?r.pop():n.defaultFactory()},t.fillPool=function(t){for(;r.length<t;)r.push(n.defaultFactory())},t.fillPool(n.initialSize)),n.constructorDuplicateFactory&&(t.createFromPool=n.constructorDuplicateFactory(r)),s.freeToPool=function(){r.length<n.maxPoolSize&&r.push(this)}}}),n("DOT/Util",["require","DOT/dot"],function(t){var i=t("DOT/dot");i.Util={testAssert:function(){return"assert.dot: false"},clamp:function(t,i,n){return i>t?i:t>n?n:t},moduloBetweenDown:function(t,i,n){var s=n-i,r=(t-i)%s;return 0>r&&(r+=s),r+i},moduloBetweenUp:function(t,i,s){return-n.moduloBetweenDown(-t,-s,-i)},rangeInclusive:function(t,i){if(t>i)return[];for(var n=new Array(i-t+1),s=t;i>=s;s++)n[s-t]=s;return n},rangeExclusive:function(t,i){return n.rangeInclusive(t+1,i-1)},toRadians:function(t){return Math.PI*t/180},toDegrees:function(t){return 180*t/Math.PI},lineLineIntersection:function(t,n,s,r){return new i.Vector2(((t.x*n.y-t.y*n.x)*(s.x-r.x)-(t.x-n.x)*(s.x*r.y-s.y*r.x))/((t.x-n.x)*(s.y-r.y)-(t.y-n.y)*(s.x-r.x)),((t.x*n.y-t.y*n.x)*(s.y-r.y)-(t.y-n.y)*(s.x*r.y-s.y*r.x))/((t.x-n.x)*(s.y-r.y)-(t.y-n.y)*(s.x-r.x)))},solveQuadraticRootsReal:function(t,i,n){var s=1e7;if(0===t||Math.abs(i/t)>s||Math.abs(n/t)>s)return[-n/i];var r=i*i-4*t*n;if(0>r)return[];var e=Math.sqrt(r);return[(-i-e)/(2*t),(-i+e)/(2*t)]},solveCubicRootsReal:function(t,i,s,r){var e=1e7;if(0===t||Math.abs(i/t)>e||Math.abs(s/t)>e||Math.abs(r/t)>e)return n.solveQuadraticRootsReal(i,s,r);if(0===r||Math.abs(t/r)>e||Math.abs(i/r)>e||Math.abs(s/r)>e)return n.solveQuadraticRootsReal(t,i,s);i/=t,s/=t,r/=t;var h=(3*s-i*i)/9,o=(-(27*r)+i*(9*s-2*i*i))/54,m=h*h*h+o*o,a=i/3;if(m>0){var u=Math.sqrt(m);return[n.cubeRoot(o+u)+n.cubeRoot(o-u)-a]}if(0===m){var c=n.cubeRoot(o),f=a-c;return[-a+2*c,f,f]}var l=-h*h*h;l=Math.acos(o/Math.sqrt(l));var x=2*Math.sqrt(-h);return[-a+x*Math.cos(l/3),-a+x*Math.cos((l+2*Math.PI)/3),-a+x*Math.cos((l+4*Math.PI)/3)]},cubeRoot:function(t){return t>=0?Math.pow(t,1/3):-Math.pow(-t,1/3)},linear:function(t,i,n,s,r){return(s-n)/(i-t)*(r-t)+n},toFixed:function(t,i){var n=Math.pow(10,i);return Math.round(t*n)/n},isInteger:function(t){return Math.floor(t)===t}};var n=i.Util;return i.testAssert=n.testAssert,i.clamp=n.clamp,i.moduloBetweenDown=n.moduloBetweenDown,i.moduloBetweenUp=n.moduloBetweenUp,i.rangeInclusive=n.rangeInclusive,i.rangeExclusive=n.rangeExclusive,i.toRadians=n.toRadians,i.toDegrees=n.toDegrees,i.lineLineIntersection=n.lineLineIntersection,i.solveQuadraticRootsReal=n.solveQuadraticRootsReal,i.solveCubicRootsReal=n.solveCubicRootsReal,i.cubeRoot=n.cubeRoot,i.linear=n.linear,n}),n("DOT/Vector2",["require","DOT/dot","PHET_CORE/inherit","PHET_CORE/Poolable","DOT/Util"],function(t){var i=t("DOT/dot"),n=t("PHET_CORE/inherit"),s=t("PHET_CORE/Poolable");t("DOT/Util"),i.Vector2=function(t,i){this.x=t||0,this.y=i||0};var r=i.Vector2;r.createPolar=function(t,i){return new r(t*Math.cos(i),t*Math.sin(i))},r.prototype={constructor:r,isVector2:!0,dimension:2,magnitude:function(){return Math.sqrt(this.magnitudeSquared())},magnitudeSquared:function(){return this.x*this.x+this.y*this.y},distance:function(t){return Math.sqrt(this.distanceSquared(t))},distanceXY:function(t,i){var n=this.x-t,s=this.y-i;return Math.sqrt(n*n+s*s)},distanceSquared:function(t){var i=this.x-t.x,n=this.y-t.y;return i*i+n*n},dot:function(t){return this.x*t.x+this.y*t.y},equals:function(t){return this.x===t.x&&this.y===t.y},equalsEpsilon:function(t,i){return i||(i=0),Math.max(Math.abs(this.x-t.x),Math.abs(this.y-t.y))<=i},isFinite:function(){return isFinite(this.x)&&isFinite(this.y)},copy:function(){return new r(this.x,this.y)},crossScalar:function(t){return this.x*t.y-this.y*t.x},normalized:function(){var t=this.magnitude();if(0===t)throw new Error("Cannot normalize a zero-magnitude vector");return new r(this.x/t,this.y/t)},timesScalar:function(t){return new r(this.x*t,this.y*t)},times:function(t){return this.timesScalar(t)},componentTimes:function(t){return new r(this.x*t.x,this.y*t.y)},plus:function(t){return new r(this.x+t.x,this.y+t.y)},plusScalar:function(t){return new r(this.x+t,this.y+t)},minus:function(t){return new r(this.x-t.x,this.y-t.y)},minusScalar:function(t){return new r(this.x-t,this.y-t)},dividedScalar:function(t){return new r(this.x/t,this.y/t)},negated:function(){return new r(-this.x,-this.y)},angle:function(){return Math.atan2(this.y,this.x)},perpendicular:function(){return new r(this.y,-this.x)},angleBetween:function(t){var n=this.magnitude(),s=t.magnitude();return Math.acos(i.clamp((this.x*t.x+this.y*t.y)/(n*s),-1,1))},rotated:function(t){var i=this.angle()+t,n=this.magnitude();return new r(n*Math.cos(i),n*Math.sin(i))},blend:function(t,i){return new r(this.x+(t.x-this.x)*i,this.y+(t.y-this.y)*i)},toString:function(){return"Vector2("+this.x+", "+this.y+")"},toVector3:function(){return new i.Vector3(this.x,this.y)},set:function(t,i){return this.x=t,this.y=i,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},add:function(t){return this.x+=t.x,this.y+=t.y,this},addScalar:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return this.x-=t.x,this.y-=t.y,this},subtractScalar:function(t){return this.x-=t,this.y-=t,this},componentMultiply:function(t){return this.x*=t.x,this.y*=t.y,this},divideScalar:function(t){return this.x/=t,this.y/=t,this},negate:function(){return this.x=-this.x,this.y=-this.y,this}},s(r,{defaultFactory:function(){return new r},constructorDuplicateFactory:function(t){return function(i,n){return t.length?t.pop().set(i,n):new r(i,n)}}}),r.Immutable=function(t,i){r.call(this,t,i)};var e=r.Immutable;return n(r,e),e.mutableOverrideHelper=function(t){e.prototype[t]=function(){throw new Error("Cannot call mutable method '"+t+"' on immutable Vector2")}},e.mutableOverrideHelper("set"),e.mutableOverrideHelper("setX"),e.mutableOverrideHelper("setY"),e.mutableOverrideHelper("add"),e.mutableOverrideHelper("addScalar"),e.mutableOverrideHelper("subtract"),e.mutableOverrideHelper("subtractScalar"),e.mutableOverrideHelper("componentMultiply"),e.mutableOverrideHelper("divideScalar"),e.mutableOverrideHelper("negate"),r.ZERO=new e(0,0),r.X_UNIT=new e(1,0),r.Y_UNIT=new e(0,1),r}),n("DOT/Bounds2",["require","DOT/dot","DOT/Vector2"],function(t){var i=t("DOT/dot");t("DOT/Vector2"),i.Bounds2=function(t,i,n,s){this.minX=t,this.minY=i,this.maxX=n,this.maxY=s};var n=i.Bounds2;return n.prototype={constructor:n,getWidth:function(){return this.maxX-this.minX},get width(){return this.getWidth()},getHeight:function(){return this.maxY-this.minY},get height(){return this.getHeight()},getX:function(){return this.minX},get x(){return this.getX()},getY:function(){return this.minY},get y(){return this.getY()},getCenter:function(){return new i.Vector2(this.getCenterX(),this.getCenterY())},get center(){return this.getCenter()},getCenterX:function(){return(this.maxX+this.minX)/2},get centerX(){return this.getCenterX()},getCenterY:function(){return(this.maxY+this.minY)/2},get centerY(){return this.getCenterY()},getMinX:function(){return this.minX},getMinY:function(){return this.minY},getMaxX:function(){return this.maxX},getMaxY:function(){return this.maxY},isEmpty:function(){return this.getWidth()<0||this.getHeight()<0},isFinite:function(){return isFinite(this.minX)&&isFinite(this.minY)&&isFinite(this.maxX)&&isFinite(this.maxY)},isValid:function(){return!this.isEmpty()&&this.isFinite()},containsCoordinates:function(t,i){return this.minX<=t&&t<=this.maxX&&this.minY<=i&&i<=this.maxY},containsPoint:function(t){return this.containsCoordinates(t.x,t.y)},containsBounds:function(t){return this.minX<=t.minX&&this.maxX>=t.maxX&&this.minY<=t.minY&&this.maxY>=t.maxY},intersectsBounds:function(t){return!this.intersection(t).isEmpty()},toString:function(){return"[x:("+this.minX+","+this.maxX+"),y:("+this.minY+","+this.maxY+")]"},equals:function(t){return this.minX===t.minX&&this.minY===t.minY&&this.maxX===t.maxX&&this.maxY===t.maxY},equalsEpsilon:function(t,i){i=i||0;var n=this.isFinite(),s=t.isFinite();return n&&s?Math.abs(this.minX-t.minX)<i&&Math.abs(this.minY-t.minY)<i&&Math.abs(this.maxX-t.maxX)<i&&Math.abs(this.maxY-t.maxY)<i:n!==s?!1:this===t?!0:(isFinite(this.minX+t.minX)?Math.abs(this.minX-t.minX)<i:this.minX===t.minX)&&(isFinite(this.minY+t.minY)?Math.abs(this.minY-t.minY)<i:this.minY===t.minY)&&(isFinite(this.maxX+t.maxX)?Math.abs(this.maxX-t.maxX)<i:this.maxX===t.maxX)&&(isFinite(this.maxY+t.maxY)?Math.abs(this.maxY-t.maxY)<i:this.maxY===t.maxY)},copy:function(){return new n(this.minX,this.minY,this.maxX,this.maxY)},union:function(t){return new n(Math.min(this.minX,t.minX),Math.min(this.minY,t.minY),Math.max(this.maxX,t.maxX),Math.max(this.maxY,t.maxY))},intersection:function(t){return new n(Math.max(this.minX,t.minX),Math.max(this.minY,t.minY),Math.min(this.maxX,t.maxX),Math.min(this.maxY,t.maxY))},withCoordinates:function(t,i){return new n(Math.min(this.minX,t),Math.min(this.minY,i),Math.max(this.maxX,t),Math.max(this.maxY,i))},withPoint:function(t){return this.withCoordinates(t.x,t.y)},withMinX:function(t){return new n(t,this.minY,this.maxX,this.maxY)},withMinY:function(t){return new n(this.minX,t,this.maxX,this.maxY)},withMaxX:function(t){return new n(this.minX,this.minY,t,this.maxY)},withMaxY:function(t){return new n(this.minX,this.minY,this.maxX,t)},roundedOut:function(){return new n(Math.floor(this.minX),Math.floor(this.minY),Math.ceil(this.maxX),Math.ceil(this.maxY))},roundedIn:function(){return new n(Math.ceil(this.minX),Math.ceil(this.minY),Math.floor(this.maxX),Math.floor(this.maxY))},transformed:function(t){return this.copy().transform(t)},dilated:function(t){return new n(this.minX-t,this.minY-t,this.maxX+t,this.maxY+t)},eroded:function(t){return this.dilated(-t)},shiftedX:function(t){return new n(this.minX+t,this.minY,this.maxX+t,this.maxY)},shiftedY:function(t){return new n(this.minX,this.minY+t,this.maxX,this.maxY+t)},shifted:function(t,i){return new n(this.minX+t,this.minY+i,this.maxX+t,this.maxY+i)},set:function(t,i,n,s){return this.minX=t,this.minY=i,this.maxX=n,this.maxY=s,this},setBounds:function(t){return this.set(t.minX,t.minY,t.maxX,t.maxY)},includeBounds:function(t){return this.minX=Math.min(this.minX,t.minX),this.minY=Math.min(this.minY,t.minY),this.maxX=Math.max(this.maxX,t.maxX),this.maxY=Math.max(this.maxY,t.maxY),this},constrainBounds:function(t){return this.minX=Math.max(this.minX,t.minX),this.minY=Math.max(this.minY,t.minY),this.maxX=Math.min(this.maxX,t.maxX),this.maxY=Math.min(this.maxY,t.maxY),this},addCoordinates:function(t,i){return this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,i),this},addPoint:function(t){return this.addCoordinates(t.x,t.y)},setMinX:function(t){return this.minX=t,this},setMinY:function(t){return this.minY=t,this},setMaxX:function(t){return this.maxX=t,this},setMaxY:function(t){return this.maxY=t,this},roundOut:function(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this},roundIn:function(){return this.minX=Math.ceil(this.minX),this.minY=Math.ceil(this.minY),this.maxX=Math.floor(this.maxX),this.maxY=Math.floor(this.maxY),this},transform:function(t){if(this.isEmpty())return this;var s=this.minX,r=this.minY,e=this.maxX,h=this.maxY,o=new i.Vector2;return this.setBounds(n.NOTHING),this.addPoint(t.multiplyVector2(o.set(s,r))),this.addPoint(t.multiplyVector2(o.set(s,h))),this.addPoint(t.multiplyVector2(o.set(e,r))),this.addPoint(t.multiplyVector2(o.set(e,h))),this},dilate:function(t){return this.set(this.minX-t,this.minY-t,this.maxX+t,this.maxY+t)},erode:function(t){return this.dilate(-t)},shiftX:function(t){return this.setMinX(this.minX+t).setMaxX(this.maxX+t)},shiftY:function(t){return this.setMinY(this.minY+t).setMaxY(this.maxY+t)},shift:function(t,i){return this.shiftX(t).shiftY(i)}},n.rect=function(t,i,s,r){return new n(t,i,t+s,i+r)},n.EVERYTHING=new n(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),n.NOTHING=new n(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),n}),n("DOT/Complex",["require","DOT/dot","PHET_CORE/inherit","DOT/Vector2"],function(t){var i=t("DOT/dot"),n=t("PHET_CORE/inherit"),s=t("DOT/Vector2");i.Complex=function(t,i){s.call(this,t,i),this.real=t,this.imaginary=i};var r=i.Complex;return r.real=function(t){return new r(t,0)},r.imaginary=function(t){return new r(0,t)},r.createPolar=function(t,i){return new r(t*Math.cos(i),t*Math.sin(i))},n(s.Immutable,r,{phase:s.prototype.angle,times:function(t){return new r(this.real*t.real-this.imaginary*t.imaginary,this.real*t.imaginary+this.imaginary*t.real)},dividedBy:function(t){var i=t.magnitudeSquared();return new r((this.real*t.real+this.imaginary*t.imaginary)/i,(this.imaginary*t.real-this.real*t.imaginary)/i)},sqrt:function(){var t=this.magnitude();return new r(Math.sqrt((t+this.real)/2),(this.imaginary>=0?1:-1)*Math.sqrt((t-this.real)/2))},conjugate:function(){return new r(this.real,-this.imaginary)},exponentiated:function(){return r.createPolar(Math.exp(this.real),this.imaginary)},toString:function(){return"Complex("+this.x+", "+this.y+")"}}),r.ZERO=new r(0,0),r.ONE=new r(1,0),r.I=new r(0,1),r}),n("DOT/ConvexHull2",["require","DOT/dot"],function(t){function i(t,i,n){return i.minus(t).crossScalar(n.minus(t))}var n=t("DOT/dot");return n.ConvexHull2={grahamScan:function(t,n){if(t.length<=2)return t;var s=Number.POSITIVE_INFINITY,r=null;_.each(t,function(t){t.y<=s&&(t.y===s&&r?t.x<r.x&&(r=t):(s=t.y,r=t))}),t=_.sortBy(t,function(t){return t.minus(r).angle()}),t.splice(_.indexOf(t,r),1);var e=[r];return _.each(t,function(t){function s(){if(e.length<2)return!1;var s=i(e[e.length-2],e[e.length-1],t);return n?0>s:0>=s}if(r.x!==t.x||r.y!==t.y){for(;s();)e.pop();e.push(t)}}),e}},n.ConvexHull2}),n("DOT/Dimension2",["require","DOT/dot"],function(t){var i=t("DOT/dot");i.Dimension2=function(t,i){this.width=t,this.height=i};var n=i.Dimension2;return n.prototype={constructor:n,toString:function(){return"["+this.width+"w, "+this.height+"h]"},equals:function(t){return this.width===t.width&&this.height===t.height}},n}),n("DOT/EigenvalueDecomposition",["require","DOT/dot"],function(t){var i=t("DOT/dot"),n=window.Float32Array||Array;i.EigenvalueDecomposition=function(t){var i,s,r=t.entries;this.n=t.getColumnDimension();var e=this.n;for(this.V=new n(e*e),this.d=new n(e),this.e=new n(e),this.issymmetric=!0,s=0;e>s&&this.issymmetric;s++)for(i=0;e>i&&this.issymmetric;i++)this.issymmetric=r[i*this.n+s]===r[s*this.n+i];if(this.issymmetric){for(i=0;e>i;i++)for(s=0;e>s;s++)this.V[i*this.n+s]=r[i*this.n+s];this.tred2(),this.tql2()}else{for(this.H=new n(e*e),this.ort=new n(e),s=0;e>s;s++)for(i=0;e>i;i++)this.H[i*this.n+s]=r[i*this.n+s];this.orthes(),this.hqr2()}};var s=i.EigenvalueDecomposition;return s.prototype={constructor:s,getV:function(){return this.V.copy()},getRealEigenvalues:function(){return this.d},getImagEigenvalues:function(){return this.e},getD:function(){for(var t=this.n,n=this.d,s=this.e,r=new i.Matrix(t,t),e=r.entries,h=0;t>h;h++){for(var o=0;t>o;o++)e[h*this.n+o]=0;e[h*this.n+h]=n[h],s[h]>0?e[h*this.n+h+1]=s[h]:s[h]<0&&(e[h*this.n+h-1]=s[h])}return r},tred2:function(){var t,i,n,s,r,e,h=this.n,o=this.V,m=this.d,a=this.e;for(i=0;h>i;i++)m[i]=o[(h-1)*h+i];for(t=h-1;t>0;t--){var u=0;for(e=0,n=0;t>n;n++)u+=Math.abs(m[n]);if(0===u)for(a[t]=m[t-1],i=0;t>i;i++)m[i]=o[(t-1)*h+i],o[t*this.n+i]=0,o[i*this.n+t]=0;else{for(n=0;t>n;n++)m[n]/=u,e+=m[n]*m[n];for(s=m[t-1],r=Math.sqrt(e),s>0&&(r=-r),a[t]=u*r,e-=s*r,m[t-1]=s-r,i=0;t>i;i++)a[i]=0;for(i=0;t>i;i++){for(s=m[i],o[i*this.n+t]=s,r=a[i]+o[i*h+i]*s,n=i+1;t-1>=n;n++)r+=o[n*h+i]*m[n],a[n]+=o[n*h+i]*s;a[i]=r}for(s=0,i=0;t>i;i++)a[i]/=e,s+=a[i]*m[i];var c=s/(e+e);for(i=0;t>i;i++)a[i]-=c*m[i];for(i=0;t>i;i++){for(s=m[i],r=a[i],n=i;t-1>=n;n++)o[n*h+i]-=s*a[n]+r*m[n];m[i]=o[(t-1)*h+i],o[t*this.n+i]=0}}m[t]=e}for(t=0;h-1>t;t++){if(o[(h-1)*h+t]=o[t*h+t],o[t*h+t]=1,e=m[t+1],0!==e){for(n=0;t>=n;n++)m[n]=o[n*h+(t+1)]/e;for(i=0;t>=i;i++){for(r=0,n=0;t>=n;n++)r+=o[n*h+(t+1)]*o[n*h+i];for(n=0;t>=n;n++)o[n*h+i]-=r*m[n]}}for(n=0;t>=n;n++)o[n*h+(t+1)]=0}for(i=0;h>i;i++)m[i]=o[(h-1)*h+i],o[(h-1)*h+i]=0;o[(h-1)*h+(h-1)]=1,a[0]=0},tql2:function(){var t,n,s,r,e,h,o,m=this.n,a=this.V,u=this.d,c=this.e;for(t=1;m>t;t++)c[t-1]=c[t];c[m-1]=0;var f=0,l=0,x=Math.pow(2,-52);for(r=0;m>r;r++){l=Math.max(l,Math.abs(u[r])+Math.abs(c[r]));for(var d=r;m>d&&!(Math.abs(c[d])<=x*l);)d++;if(d>r){o=0;do{o+=1,e=u[r],h=(u[r+1]-e)/(2*c[r]);var p=i.Matrix.hypot(h,1);0>h&&(p=-p),u[r]=c[r]/(h+p),u[r+1]=c[r]*(h+p);var y=u[r+1],v=e-u[r];for(t=r+2;m>t;t++)u[t]-=v;f+=v,h=u[d];var w=1,T=w,g=w,M=c[r+1],O=0,D=0;for(t=d-1;t>=r;t--)for(g=T,T=w,D=O,e=w*c[t],v=w*h,p=i.Matrix.hypot(h,c[t]),c[t+1]=O*p,O=c[t]/p,w=h/p,h=w*u[t]-O*e,u[t+1]=v+O*(w*e+O*u[t]),s=0;m>s;s++)v=a[s*m+(t+1)],a[s*m+(t+1)]=O*a[s*m+t]+w*v,a[s*m+t]=w*a[s*m+t]-O*v;h=-O*D*g*M*c[r]/y,c[r]=O*h,u[r]=w*h}while(Math.abs(c[r])>x*l)}u[r]=u[r]+f,c[r]=0}for(t=0;m-1>t;t++){for(s=t,h=u[t],n=t+1;m>n;n++)u[n]<h&&(s=n,h=u[n]);if(s!==t)for(u[s]=u[t],u[t]=h,n=0;m>n;n++)h=a[n*this.n+t],a[n*this.n+t]=a[n*m+s],a[n*m+s]=h}},orthes:function(){var t,i,n,s,r,e=this.n,h=this.V,o=this.H,m=this.ort,a=0,u=e-1;for(n=a+1;u-1>=n;n++){var c=0;for(t=n;u>=t;t++)c+=Math.abs(o[t*e+(n-1)]);if(0!==c){var f=0;for(t=u;t>=n;t--)m[t]=o[t*e+(n-1)]/c,f+=m[t]*m[t];for(r=Math.sqrt(f),m[n]>0&&(r=-r),f-=m[n]*r,m[n]=m[n]-r,i=n;e>i;i++){for(s=0,t=u;t>=n;t--)s+=m[t]*o[t*this.n+i];for(s/=f,t=n;u>=t;t++)o[t*this.n+i]-=s*m[t]}for(t=0;u>=t;t++){for(s=0,i=u;i>=n;i--)s+=m[i]*o[t*this.n+i];for(s/=f,i=n;u>=i;i++)o[t*this.n+i]-=s*m[i]}m[n]=c*m[n],o[n*e+(n-1)]=c*r}}for(t=0;e>t;t++)for(i=0;e>i;i++)h[t*this.n+i]=t===i?1:0;for(n=u-1;n>=a+1;n--)if(0!==o[n*e+(n-1)]){for(t=n+1;u>=t;t++)m[t]=o[t*e+(n-1)];for(i=n;u>=i;i++){for(r=0,t=n;u>=t;t++)r+=m[t]*h[t*this.n+i];for(r=r/m[n]/o[n*e+(n-1)],t=n;u>=t;t++)h[t*this.n+i]+=r*m[t]}}},cdiv:function(t,i,n,s){var r,e;Math.abs(n)>Math.abs(s)?(r=s/n,e=n+r*s,this.cdivr=(t+r*i)/e,this.cdivi=(i-r*t)/e):(r=n/s,e=s+r*n,this.cdivr=(r*t+i)/e,this.cdivi=(r*i-t)/e)},hqr2:function(){var t,i,n,s,r,e,h,o=this.V,m=this.d,a=this.e,u=this.H,c=this.n;t=c-1;var f,l,x,d,p=0,y=c-1,v=Math.pow(2,-52),w=0,T=0,g=0,M=0,O=0,D=0,E=0;for(i=0;c>i;i++)for((p>i||i>y)&&(m[i]=u[i*t+i],a[i]=0),n=Math.max(i-1,0);c>n;n++)E+=Math.abs(u[i*this.n+n]);for(h=0;t>=p;){for(r=t;r>p&&(O=Math.abs(u[(r-1)*t+(r-1)])+Math.abs(u[r*t+r]),0===O&&(O=E),!(Math.abs(u[r*t+(r-1)])<v*O));)r--;if(r===t)u[t*t+t]=u[t*t+t]+w,m[t]=u[t*t+t],a[t]=0,t--,h=0;else if(r===t-1){if(l=u[t*t+t-1]*u[(t-1)*t+t],T=(u[(t-1)*t+(t-1)]-u[t*t+t])/2,g=T*T+l,D=Math.sqrt(Math.abs(g)),u[t*t+t]=u[t*t+t]+w,u[(t-1)*t+(t-1)]=u[(t-1)*t+(t-1)]+w,x=u[t*t+t],g>=0){for(D=T>=0?T+D:T-D,m[t-1]=x+D,m[t]=m[t-1],0!==D&&(m[t]=x-l/D),a[t-1]=0,a[t]=0,x=u[t*t+t-1],O=Math.abs(x)+Math.abs(D),T=x/O,g=D/O,M=Math.sqrt(T*T+g*g),T/=M,g/=M,n=t-1;c>n;n++)D=u[(t-1)*t+n],u[(t-1)*t+n]=g*D+T*u[t*t+n],u[t*t+n]=g*u[t*t+n]-T*D;for(i=0;t>=i;i++)D=u[i*t+t-1],u[i*t+t-1]=g*D+T*u[i*t+t],u[i*t+t]=g*u[i*t+t]-T*D;for(i=p;y>=i;i++)D=o[i*t+t-1],o[i*t+t-1]=g*D+T*o[i*t+t],o[i*t+t]=g*o[i*t+t]-T*D}else m[t-1]=x+T,m[t]=x+T,a[t-1]=D,a[t]=-D;t-=2,h=0}else{if(x=u[t*t+t],d=0,l=0,t>r&&(d=u[(t-1)*t+(t-1)],l=u[t*t+t-1]*u[(t-1)*t+t]),10===h){for(w+=x,i=p;t>=i;i++)u[i*t+i]-=x;O=Math.abs(u[t*t+t-1])+Math.abs(u[(t-1)*t+t-2]),x=d=.75*O,l=-.4375*O*O}if(30===h&&(O=(d-x)/2,O=O*O+l,O>0)){for(O=Math.sqrt(O),x>d&&(O=-O),O=x-l/((d-x)/2+O),i=p;t>=i;i++)u[i*t+i]-=O;w+=O,x=d=l=.964}for(h+=1,e=t-2;e>=r&&(D=u[e*t+e],M=x-D,O=d-D,T=(M*O-l)/u[(e+1)*t+e]+u[e*t+e+1],g=u[(e+1)*t+e+1]-D-M-O,M=u[(e+2)*t+e+1],O=Math.abs(T)+Math.abs(g)+Math.abs(M),T/=O,g/=O,M/=O,e!==r)&&!(Math.abs(u[e*t+(e-1)])*(Math.abs(g)+Math.abs(M))<v*Math.abs(T)*(Math.abs(u[(e-1)*t+e-1])+Math.abs(D)+Math.abs(u[(e+1)*t+e+1])));)e--;for(i=e+2;t>=i;i++)u[i*t+i-2]=0,i>e+2&&(u[i*t+i-3]=0);for(s=e;t-1>=s;s++){var b=s!==t-1;if(s!==e&&(T=u[s*t+s-1],g=u[(s+1)*t+s-1],M=b?u[(s+2)*t+s-1]:0,x=Math.abs(T)+Math.abs(g)+Math.abs(M),0!==x&&(T/=x,g/=x,M/=x)),0===x)break;if(O=Math.sqrt(T*T+g*g+M*M),0>T&&(O=-O),0!==O){for(s!==e?u[s*t+s-1]=-O*x:r!==e&&(u[s*t+s-1]=-u[s*t+s-1]),T+=O,x=T/O,d=g/O,D=M/O,g/=T,M/=T,n=s;c>n;n++)T=u[s*t+n]+g*u[(s+1)*t+n],b&&(T+=M*u[(s+2)*t+n],u[(s+2)*t+n]=u[(s+2)*t+n]-T*D),u[s*t+n]=u[s*t+n]-T*x,u[(s+1)*t+n]=u[(s+1)*t+n]-T*d;for(i=0;i<=Math.min(t,s+3);i++)T=x*u[i*t+s]+d*u[i*t+s+1],b&&(T+=D*u[i*t+s+2],u[i*t+s+2]=u[i*t+s+2]-T*M),u[i*t+s]=u[i*t+s]-T,u[i*t+s+1]=u[i*t+s+1]-T*g;for(i=p;y>=i;i++)T=x*o[i*t+s]+d*o[i*t+s+1],b&&(T+=D*o[i*t+s+2],o[i*t+s+2]=o[i*t+s+2]-T*M),o[i*t+s]=o[i*t+s]-T,o[i*t+s+1]=o[i*t+s+1]-T*g}}}}if(0!==E){for(t=c-1;t>=0;t--)if(T=m[t],g=a[t],0===g)for(r=t,u[t*t+t]=1,i=t-1;i>=0;i--){for(l=u[i*t+i]-T,M=0,n=r;t>=n;n++)M+=u[i*this.n+n]*u[n*t+t];if(a[i]<0)D=l,O=M;else if(r=i,0===a[i]?u[i*t+t]=0!==l?-M/l:-M/(v*E):(x=u[i*t+i+1],d=u[(i+1)*t+i],g=(m[i]-T)*(m[i]-T)+a[i]*a[i],f=(x*O-D*M)/g,u[i*t+t]=f,u[(i+1)*t+t]=Math.abs(x)>Math.abs(D)?(-M-l*f)/x:(-O-d*f)/D),f=Math.abs(u[i*t+t]),v*f*f>1)for(n=i;t>=n;n++)u[n*t+t]=u[n*t+t]/f}else if(0>g)for(r=t-1,Math.abs(u[t*t+t-1])>Math.abs(u[(t-1)*t+t])?(u[(t-1)*t+(t-1)]=g/u[t*t+t-1],u[(t-1)*t+t]=-(u[t*t+t]-T)/u[t*t+t-1]):(this.cdiv(0,-u[(t-1)*t+t],u[(t-1)*t+(t-1)]-T,g),u[(t-1)*t+(t-1)]=this.cdivr,u[(t-1)*t+t]=this.cdivi),u[t*t+t-1]=0,u[t*t+t]=1,i=t-2;i>=0;i--){var I,R,V,Y;for(I=0,R=0,n=r;t>=n;n++)I+=u[i*this.n+n]*u[n*t+t-1],R+=u[i*this.n+n]*u[n*t+t];if(l=u[i*t+i]-T,a[i]<0)D=l,M=I,O=R;else if(r=i,0===a[i]?(this.cdiv(-I,-R,l,g),u[i*t+t-1]=this.cdivr,u[i*t+t]=this.cdivi):(x=u[i*t+i+1],d=u[(i+1)*t+i],V=(m[i]-T)*(m[i]-T)+a[i]*a[i]-g*g,Y=2*(m[i]-T)*g,0===V&&0===Y&&(V=v*E*(Math.abs(l)+Math.abs(g)+Math.abs(x)+Math.abs(d)+Math.abs(D))),this.cdiv(x*M-D*I+g*R,x*O-D*R-g*I,V,Y),u[i*t+t-1]=this.cdivr,u[i*t+t]=this.cdivi,Math.abs(x)>Math.abs(D)+Math.abs(g)?(u[(i+1)*t+t-1]=(-I-l*u[i*t+t-1]+g*u[i*t+t])/x,u[(i+1)*t+t]=(-R-l*u[i*t+t]-g*u[i*t+t-1])/x):(this.cdiv(-M-d*u[i*t+t-1],-O-d*u[i*t+t],D,g),u[(i+1)*t+t-1]=this.cdivr,u[(i+1)*t+t]=this.cdivi)),f=Math.max(Math.abs(u[i*t+t-1]),Math.abs(u[i*t+t])),v*f*f>1)for(n=i;t>=n;n++)u[n*t+t-1]=u[n*t+t-1]/f,u[n*t+t]=u[n*t+t]/f}for(i=0;c>i;i++)if(p>i||i>y)for(n=i;c>n;n++)o[i*this.n+n]=u[i*this.n+n];for(n=c-1;n>=p;n--)for(i=p;y>=i;i++){for(D=0,s=p;s<=Math.min(n,y);s++)D+=o[i*t+s]*u[s*t+n];o[i*this.n+n]=D}}}},s}),n("DOT/LinearFunction",["require","DOT/dot","DOT/Util"],function(t){var i=t("DOT/dot");return t("DOT/Util"),i.LinearFunction=function(t,n,s,r,e){e=_.isUndefined(e)?!1:e;var h=function(t,n,s,r,e,h){var o=i.Util.linear(t,n,s,r,e);if(h){var m=Math.max(s,r),a=Math.min(s,r);o=i.Util.clamp(o,a,m)}return o},o=function(i){return h(t,n,s,r,i,e)};return o.inverse=function(i){return h(s,r,t,n,i,e)},o},i.LinearFunction}),n("DOT/LUDecomposition",["require","DOT/dot"],function(t){var i=t("DOT/dot"),n=window.Float32Array||Array;i.LUDecomposition=function(t){var i,s,r;this.matrix=t,this.LU=t.getArrayCopy();var e=this.LU;this.m=t.getRowDimension();var h=this.m;this.n=t.getColumnDimension();var o=this.n;for(this.piv=new Uint32Array(h),i=0;h>i;i++)this.piv[i]=i;this.pivsign=1;var m=new n(h);for(s=0;o>s;s++){for(i=0;h>i;i++)m[i]=e[t.index(i,s)];for(i=0;h>i;i++){var a=Math.min(i,s),u=0;for(r=0;a>r;r++){var c=t.index(i,r);u+=e[c]*m[r]}m[i]-=u,e[t.index(i,s)]=m[i]}var f=s;for(i=s+1;h>i;i++)Math.abs(m[i])>Math.abs(m[f])&&(f=i);if(f!==s){for(r=0;o>r;r++){var l=t.index(f,r),x=t.index(s,r),d=e[l];e[l]=e[x],e[x]=d}r=this.piv[f],this.piv[f]=this.piv[s],this.piv[s]=r,this.pivsign=-this.pivsign}if(h>s&&0!==e[this.matrix.index(s,s)])for(i=s+1;h>i;i++)e[t.index(i,s)]/=e[t.index(s,s)]}};var s=i.LUDecomposition;return s.prototype={constructor:s,isNonsingular:function(){for(var t=0;t<this.n;t++){var i=this.matrix.index(t,t);if(0===this.LU[i])return!1}return!0},getL:function(){for(var t=new i.Matrix(this.m,this.n),n=0;n<this.m;n++)for(var s=0;s<this.n;s++)t.entries[t.index(n,s)]=n>s?this.LU[this.matrix.index(n,s)]:n===s?1:0;return t},getU:function(){for(var t=new i.Matrix(this.n,this.n),n=0;n<this.n;n++)for(var s=0;s<this.n;s++)t.entries[t.index(n,s)]=s>=n?this.LU[this.matrix.index(n,s)]:0;return t},getPivot:function(){for(var t=new Uint32Array(this.m),i=0;i<this.m;i++)t[i]=this.piv[i];return t},getDoublePivot:function(){for(var t=new n(this.m),i=0;i<this.m;i++)t[i]=this.piv[i];return t},det:function(){if(this.m!==this.n)throw new Error("Matrix must be square.");for(var t=this.pivsign,i=0;i<this.n;i++)t*=this.LU[this.matrix.index(i,i)];return t},solve:function(t){var i,n,s;if(t.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isNonsingular())throw new Error("Matrix is singular.");var r=t.getColumnDimension(),e=t.getArrayRowMatrix(this.piv,0,r-1);for(s=0;s<this.n;s++)for(i=s+1;i<this.n;i++)for(n=0;r>n;n++)e.entries[e.index(i,n)]-=e.entries[e.index(s,n)]*this.LU[this.matrix.index(i,s)];for(s=this.n-1;s>=0;s--){for(n=0;r>n;n++)e.entries[e.index(s,n)]/=this.LU[this.matrix.index(s,s)];for(i=0;s>i;i++)for(n=0;r>n;n++)e.entries[e.index(i,n)]-=e.entries[e.index(s,n)]*this.LU[this.matrix.index(i,s)]}return e}},s}),n("PHET_CORE/isArray",["require"],function(){return function(t){return"[object Array]"===Object.prototype.toString.call(t)}}),n("DOT/SingularValueDecomposition",["require","DOT/dot"],function(t){var i=t("DOT/dot"),n=window.Float32Array||Array;i.SingularValueDecomposition=function(t){this.matrix=t;var s=t,r=s.getArrayCopy();this.m=s.getRowDimension(),this.n=s.getColumnDimension();var e=this.m,h=this.n,o=Math.min,m=Math.max,a=Math.pow,u=Math.abs,c=o(e,h);this.s=new n(o(e+1,h));var f=this.s;this.U=new n(e*c);var l=this.U;this.V=new n(h*h);var x,d,p,y,v,w,T,g=this.V,M=new n(h),O=new n(e),D=!0,E=!0,b=i.Matrix.hypot,I=o(e-1,h),R=m(0,o(h-2,e));for(p=0;p<m(I,R);p++){if(I>p){for(f[p]=0,x=p;e>x;x++)f[p]=b(f[p],r[x*h+p]);if(0!==f[p]){for(r[p*h+p]<0&&(f[p]=-f[p]),x=p;e>x;x++)r[x*h+p]/=f[p];r[p*h+p]+=1}f[p]=-f[p]}for(d=p+1;h>d;d++){if(I>p&&0!==f[p]){for(y=0,x=p;e>x;x++)y+=r[x*h+p]*r[x*h+d];for(y=-y/r[p*h+p],x=p;e>x;x++)r[x*h+d]+=y*r[x*h+p]}M[d]=r[p*h+d]}if(D&&I>p)for(x=p;e>x;x++)l[x*c+p]=r[x*h+p];if(R>p){for(M[p]=0,x=p+1;h>x;x++)M[p]=b(M[p],M[x]);if(0!==M[p]){for(M[p+1]<0&&(M[p]=-M[p]),x=p+1;h>x;x++)M[x]/=M[p];M[p+1]+=1}if(M[p]=-M[p],e>p+1&&0!==M[p]){for(x=p+1;e>x;x++)O[x]=0;for(d=p+1;h>d;d++)for(x=p+1;e>x;x++)O[x]+=M[d]*r[x*h+d];for(d=p+1;h>d;d++)for(y=-M[d]/M[p+1],x=p+1;e>x;x++)r[x*h+d]+=y*O[x]}if(E)for(x=p+1;h>x;x++)g[x*h+p]=M[x]}}var V=o(h,e+1);if(h>I&&(f[I]=r[I*h+I]),V>e&&(f[V-1]=0),V>R+1&&(M[R]=r[R*h+V-1]),M[V-1]=0,D){for(d=I;c>d;d++){for(x=0;e>x;x++)l[x*c+d]=0;
l[d*c+d]=1}for(p=I-1;p>=0;p--)if(0!==f[p]){for(d=p+1;c>d;d++){for(y=0,x=p;e>x;x++)y+=l[x*c+p]*l[x*c+d];for(y=-y/l[p*c+p],x=p;e>x;x++)l[x*c+d]+=y*l[x*c+p]}for(x=p;e>x;x++)l[x*c+p]=-l[x*c+p];for(l[p*c+p]=1+l[p*c+p],x=0;p-1>x;x++)l[x*c+p]=0}else{for(x=0;e>x;x++)l[x*c+p]=0;l[p*c+p]=1}}if(E)for(p=h-1;p>=0;p--){if(R>p&&0!==M[p])for(d=p+1;c>d;d++){for(y=0,x=p+1;h>x;x++)y+=g[x*h+p]*g[x*h+d];for(y=-y/g[(p+1)*h+p],x=p+1;h>x;x++)g[x*h+d]+=y*g[x*h+p]}for(x=0;h>x;x++)g[x*h+p]=0;g[p*h+p]=1}for(var Y=V-1,z=0,N=a(2,-52),S=a(2,-966);V>0;){var X;for(p=V-2;p>=-1&&-1!==p;p--)if(u(M[p])<=S+N*(u(f[p])+u(f[p+1]))){M[p]=0;break}if(p===V-2)X=4;else{var A;for(A=V-1;A>=p&&A!==p;A--)if(y=(A!==V?u(M[A]):0)+(A!==p+1?u(M[A-1]):0),u(f[A])<=S+N*y){f[A]=0;break}A===p?X=3:A===V-1?X=1:(X=2,p=A)}switch(p++,X){case 1:for(v=M[V-2],M[V-2]=0,d=V-2;d>=p;d--)if(y=b(f[d],v),w=f[d]/y,T=v/y,f[d]=y,d!==p&&(v=-T*M[d-1],M[d-1]=w*M[d-1]),E)for(x=0;h>x;x++)y=w*g[x*h+d]+T*g[x*h+V-1],g[x*h+V-1]=-T*g[x*h+d]+w*g[x*h+V-1],g[x*h+d]=y;break;case 2:for(v=M[p-1],M[p-1]=0,d=p;V>d;d++)if(y=b(f[d],v),w=f[d]/y,T=v/y,f[d]=y,v=-T*M[d],M[d]=w*M[d],D)for(x=0;e>x;x++)y=w*l[x*c+d]+T*l[x*c+p-1],l[x*c+p-1]=-T*l[x*c+d]+w*l[x*c+p-1],l[x*c+d]=y;break;case 3:var C=m(m(m(m(u(f[V-1]),u(f[V-2])),u(M[V-2])),u(f[p])),u(M[p])),H=f[V-1]/C,F=f[V-2]/C,P=M[V-2]/C,_=f[p]/C,q=M[p]/C,L=((F+H)*(F-H)+P*P)/2,U=H*P*H*P,k=0;(0!==L||0!==U)&&(k=Math.sqrt(L*L+U),0>L&&(k=-k),k=U/(L+k)),v=(_+H)*(_-H)+k;var j=_*q;for(d=p;V-1>d;d++){if(y=b(v,j),w=v/y,T=j/y,d!==p&&(M[d-1]=y),v=w*f[d]+T*M[d],M[d]=w*M[d]-T*f[d],j=T*f[d+1],f[d+1]=w*f[d+1],E)for(x=0;h>x;x++)y=w*g[x*h+d]+T*g[x*h+d+1],g[x*h+d+1]=-T*g[x*h+d]+w*g[x*h+d+1],g[x*h+d]=y;if(y=b(v,j),w=v/y,T=j/y,f[d]=y,v=w*M[d]+T*f[d+1],f[d+1]=-T*M[d]+w*f[d+1],j=T*M[d+1],M[d+1]=w*M[d+1],D&&e-1>d)for(x=0;e>x;x++)y=w*l[x*c+d]+T*l[x*c+d+1],l[x*c+d+1]=-T*l[x*c+d]+w*l[x*c+d+1],l[x*c+d]=y}M[V-2]=v,z+=1;break;case 4:if(f[p]<=0&&(f[p]=f[p]<0?-f[p]:0,E))for(x=0;Y>=x;x++)g[x*h+p]=-g[x*h+p];for(;Y>p&&!(f[p]>=f[p+1]);){if(y=f[p],f[p]=f[p+1],f[p+1]=y,E&&h-1>p)for(x=0;h>x;x++)y=g[x*h+p+1],g[x*h+p+1]=g[x*h+p],g[x*h+p]=y;if(D&&e-1>p)for(x=0;e>x;x++)y=l[x*c+p+1],l[x*c+p+1]=l[x*c+p],l[x*c+p]=y;p++}z=0,V--}}};var s=i.SingularValueDecomposition;s.prototype={constructor:s,getU:function(){return new i.Matrix(this.m,Math.min(this.m+1,this.n),this.U,!0)},getV:function(){return new i.Matrix(this.n,this.n,this.V,!0)},getSingularValues:function(){return this.s},getS:function(){for(var t=new i.Matrix(this.n,this.n),n=0;n<this.n;n++){for(var s=0;s<this.n;s++)t.entries[t.index(n,s)]=0;t.entries[t.index(n,n)]=this.s[n]}return t},norm2:function(){return this.s[0]},cond:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]},rank:function(){for(var t=Math.pow(2,-23),i=Math.max(this.m,this.n)*this.s[0]*t,n=0,s=0;s<this.s.length;s++)this.s[s]>i&&n++;return n}}}),n("DOT/QRDecomposition",["require","DOT/dot"],function(t){var i=t("DOT/dot"),n=window.Float32Array||Array;i.QRDecomposition=function(t){this.matrix=t,this.QR=t.getArrayCopy();var s=this.QR;this.m=t.getRowDimension();var r=this.m;this.n=t.getColumnDimension();var e=this.n;this.Rdiag=new n(e);var h,o,m;for(m=0;e>m;m++){var a=0;for(h=m;r>h;h++)a=i.Matrix.hypot(a,s[this.matrix.index(h,m)]);if(0!==a){for(s[this.matrix.index(m,m)]<0&&(a=-a),h=m;r>h;h++)s[this.matrix.index(h,m)]/=a;for(s[this.matrix.index(m,m)]+=1,o=m+1;e>o;o++){var u=0;for(h=m;r>h;h++)u+=s[this.matrix.index(h,m)]*s[this.matrix.index(h,o)];for(u=-u/s[this.matrix.index(m,m)],h=m;r>h;h++)s[this.matrix.index(h,o)]+=u*s[this.matrix.index(h,m)]}}this.Rdiag[m]=-a}};var s=i.QRDecomposition;return s.prototype={constructor:s,isFullRank:function(){for(var t=0;t<this.n;t++)if(0===this.Rdiag[t])return!1;return!0},getH:function(){for(var t=new i.Matrix(this.m,this.n),n=0;n<this.m;n++)for(var s=0;s<this.n;s++)t.entries[t.index(n,s)]=n>=s?this.QR[this.matrix.index(n,s)]:0;return t},getR:function(){for(var t=new i.Matrix(this.n,this.n),n=0;n<this.n;n++)for(var s=0;s<this.n;s++)t.entries[t.index(n,s)]=s>n?this.QR[this.matrix.index(n,s)]:n===s?this.Rdiag[n]:0;return t},getQ:function(){var t,n,s,r=new i.Matrix(this.m,this.n);for(s=this.n-1;s>=0;s--){for(t=0;t<this.m;t++)r.entries[r.index(t,s)]=0;for(r.entries[r.index(s,s)]=1,n=s;n<this.n;n++)if(0!==this.QR[this.matrix.index(s,s)]){var e=0;for(t=s;t<this.m;t++)e+=this.QR[this.matrix.index(t,s)]*r.entries[r.index(t,n)];for(e=-e/this.QR[this.matrix.index(s,s)],t=s;t<this.m;t++)r.entries[r.index(t,n)]+=e*this.QR[this.matrix.index(t,s)]}}return r},solve:function(t){if(t.getRowDimension()!==this.m)throw new Error("Matrix row dimensions must agree.");if(!this.isFullRank())throw new Error("Matrix is rank deficient.");var n,s,r,e=t.getColumnDimension(),h=t.getArrayCopy();for(r=0;r<this.n;r++)for(s=0;e>s;s++){var o=0;for(n=r;n<this.m;n++)o+=this.QR[this.matrix.index(n,r)]*h[t.index(n,s)];for(o=-o/this.QR[this.matrix.index(r,r)],n=r;n<this.m;n++)h[t.index(n,s)]+=o*this.QR[this.matrix.index(n,r)]}for(r=this.n-1;r>=0;r--){for(s=0;e>s;s++)h[t.index(r,s)]/=this.Rdiag[r];for(n=0;r>n;n++)for(s=0;e>s;s++)h[t.index(n,s)]-=h[t.index(r,s)]*this.QR[this.matrix.index(n,r)]}return new i.Matrix(h,this.n,e).getMatrix(0,this.n-1,0,e-1)}},s}),n("DOT/Vector4",["require","DOT/dot","DOT/Util"],function(t){var i=t("DOT/dot");t("DOT/Util"),i.Vector4=function(t,i,n,s){this.x=t||0,this.y=i||0,this.z=n||0,this.w=void 0!==s?s:1};var n=i.Vector4;n.prototype={constructor:n,magnitude:function(){return Math.sqrt(this.magnitudeSquared())},magnitudeSquared:function(){this.dot(this)},distance:function(t){return this.minus(t).magnitude()},distanceSquared:function(t){return this.minus(t).magnitudeSquared()},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},isFinite:function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)&&isFinite(this.w)},normalized:function(){var t=this.magnitude();if(0===t)throw new Error("Cannot normalize a zero-magnitude vector");return new n(this.x/t,this.y/t,this.z/t,this.w/t)},timesScalar:function(t){return new n(this.x*t,this.y*t,this.z*t,this.w*t)},times:function(t){return this.timesScalar(t)},componentTimes:function(t){return new n(this.x*t.x,this.y*t.y,this.z*t.z,this.w*t.w)},plus:function(t){return new n(this.x+t.x,this.y+t.y,this.z+t.z,this.w+t.w)},plusScalar:function(t){return new n(this.x+t,this.y+t,this.z+t,this.w+t)},minus:function(t){return new n(this.x-t.x,this.y-t.y,this.z-t.z,this.w-t.w)},minusScalar:function(t){return new n(this.x-t,this.y-t,this.z-t,this.w-t)},dividedScalar:function(t){return new n(this.x/t,this.y/t,this.z/t,this.w/t)},negated:function(){return new n(-this.x,-this.y,-this.z,-this.w)},angleBetween:function(t){return Math.acos(i.clamp(this.normalized().dot(t.normalized()),-1,1))},blend:function(t,i){return this.plus(t.minus(this).times(i))},toString:function(){return"Vector4("+this.x+", "+this.y+", "+this.z+", "+this.w+")"},toVector3:function(){return new i.Vector3(this.x,this.y,this.z)},set:function(t,i,n,s){this.x=t,this.y=i,this.z=n,this.w=s},setX:function(t){this.x=t},setY:function(t){this.y=t},setZ:function(t){this.z=t},setW:function(t){this.w=t},copy:function(t){this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w},add:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w},addScalar:function(t){this.x+=t,this.y+=t,this.z+=t,this.w+=t},subtract:function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w},subtractScalar:function(t){this.x-=t,this.y-=t,this.z-=t,this.w-=t},componentMultiply:function(t){this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w},divideScalar:function(t){this.x/=t,this.y/=t,this.z/=t,this.w/=t},negate:function(){this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z&&this.w===t.w},equalsEpsilon:function(t,i){return i||(i=0),Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)+Math.abs(this.w-t.w)<=i},isVector4:!0,dimension:4},n.Immutable=function(t,i,n,s){this.x=t||0,this.y=i||0,this.z=n||0,this.w=void 0!==s?s:1};var s=n.Immutable;return s.prototype=new n,s.prototype.constructor=s,s.mutableOverrideHelper=function(t){s.prototype[t]=function(){throw new Error("Cannot call mutable method '"+t+"' on immutable Vector4")}},s.mutableOverrideHelper("set"),s.mutableOverrideHelper("setX"),s.mutableOverrideHelper("setY"),s.mutableOverrideHelper("setZ"),s.mutableOverrideHelper("setW"),s.mutableOverrideHelper("copy"),s.mutableOverrideHelper("add"),s.mutableOverrideHelper("addScalar"),s.mutableOverrideHelper("subtract"),s.mutableOverrideHelper("subtractScalar"),s.mutableOverrideHelper("componentMultiply"),s.mutableOverrideHelper("divideScalar"),s.mutableOverrideHelper("negate"),n.ZERO=new s(0,0,0,0),n.X_UNIT=new s(1,0,0,0),n.Y_UNIT=new s(0,1,0,0),n.Z_UNIT=new s(0,0,1,0),n.W_UNIT=new s(0,0,0,1),n}),n("DOT/Vector3",["require","DOT/dot","DOT/Util","DOT/Vector2","DOT/Vector4"],function(t){var i=t("DOT/dot");t("DOT/Util"),t("DOT/Vector2"),t("DOT/Vector4"),i.Vector3=function(t,i,n){this.x=t||0,this.y=i||0,this.z=n||0};var n=i.Vector3;n.prototype={constructor:n,magnitude:function(){return Math.sqrt(this.magnitudeSquared())},magnitudeSquared:function(){return this.dot(this)},distance:function(t){return this.minus(t).magnitude()},distanceSquared:function(t){return this.minus(t).magnitudeSquared()},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},isFinite:function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.z)},cross:function(t){return new n(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},normalized:function(){var t=this.magnitude();if(0===t)throw new Error("Cannot normalize a zero-magnitude vector");return new n(this.x/t,this.y/t,this.z/t)},timesScalar:function(t){return new n(this.x*t,this.y*t,this.z*t)},times:function(t){return this.timesScalar(t)},componentTimes:function(t){return new n(this.x*t.x,this.y*t.y,this.z*t.z)},plus:function(t){return new n(this.x+t.x,this.y+t.y,this.z+t.z)},plusScalar:function(t){return new n(this.x+t,this.y+t,this.z+t)},minus:function(t){return new n(this.x-t.x,this.y-t.y,this.z-t.z)},minusScalar:function(t){return new n(this.x-t,this.y-t,this.z-t)},dividedScalar:function(t){return new n(this.x/t,this.y/t,this.z/t)},negated:function(){return new n(-this.x,-this.y,-this.z)},angleBetween:function(t){return Math.acos(i.clamp(this.normalized().dot(t.normalized()),-1,1))},blend:function(t,i){return this.plus(t.minus(this).times(i))},toString:function(){return"Vector3("+this.x+", "+this.y+", "+this.z+")"},toVector2:function(){return new i.Vector2(this.x,this.y)},toVector4:function(){return new i.Vector4(this.x,this.y,this.z)},set:function(t,i,n){this.x=t,this.y=i,this.z=n},setX:function(t){this.x=t},setY:function(t){this.y=t},setZ:function(t){this.z=t},copy:function(t){this.x=t.x,this.y=t.y,this.z=t.z},add:function(t){this.x+=t.x,this.y+=t.y,this.z+=t.z},addScalar:function(t){this.x+=t,this.y+=t,this.z+=t},subtract:function(t){this.x-=t.x,this.y-=t.y,this.z-=t.z},subtractScalar:function(t){this.x-=t,this.y-=t,this.z-=t},componentMultiply:function(t){this.x*=t.x,this.y*=t.y,this.z*=t.z},divideScalar:function(t){this.x/=t,this.y/=t,this.z/=t},negate:function(){this.x=-this.x,this.y=-this.y,this.z=-this.z},equals:function(t){return this.x===t.x&&this.y===t.y&&this.z===t.z},equalsEpsilon:function(t,i){return i||(i=0),Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)<=i},isVector3:!0,dimension:3},n.Immutable=function(t,i,n){this.x=t||0,this.y=i||0,this.z=n||0};var s=n.Immutable;return s.prototype=new n,s.prototype.constructor=s,s.mutableOverrideHelper=function(t){s.prototype[t]=function(){throw new Error("Cannot call mutable method '"+t+"' on immutable Vector3")}},s.mutableOverrideHelper("set"),s.mutableOverrideHelper("setX"),s.mutableOverrideHelper("setY"),s.mutableOverrideHelper("setZ"),s.mutableOverrideHelper("copy"),s.mutableOverrideHelper("add"),s.mutableOverrideHelper("addScalar"),s.mutableOverrideHelper("subtract"),s.mutableOverrideHelper("subtractScalar"),s.mutableOverrideHelper("componentMultiply"),s.mutableOverrideHelper("divideScalar"),s.mutableOverrideHelper("negate"),n.ZERO=new s(0,0,0),n.X_UNIT=new s(1,0,0),n.Y_UNIT=new s(0,1,0),n.Z_UNIT=new s(0,0,1),n}),n("DOT/Matrix",["require","DOT/dot","PHET_CORE/isArray","DOT/SingularValueDecomposition","DOT/LUDecomposition","DOT/QRDecomposition","DOT/EigenvalueDecomposition","DOT/Vector2","DOT/Vector3","DOT/Vector4"],function(t){var i=t("DOT/dot"),n=window.Float32Array||Array,s=t("PHET_CORE/isArray");t("DOT/SingularValueDecomposition"),t("DOT/LUDecomposition"),t("DOT/QRDecomposition"),t("DOT/EigenvalueDecomposition"),t("DOT/Vector2"),t("DOT/Vector3"),t("DOT/Vector4"),i.Matrix=function(t,i,r,e){this.m=t,this.n=i;var h=t*i;this.size=h;var o;if(e)this.entries=r;else if(r||(r=0),this.entries=new n(h),s(r))for(o=0;h>o;o++)this.entries[o]=r[o];else for(o=0;h>o;o++)this.entries[o]=r};var r=i.Matrix;return r.hypot=function(t,i){var n;return Math.abs(t)>Math.abs(i)?(n=i/t,n=Math.abs(t)*Math.sqrt(1+n*n)):0!==i?(n=t/i,n=Math.abs(i)*Math.sqrt(1+n*n)):n=0,n},r.prototype={constructor:r,copy:function(){for(var t=new r(this.m,this.n),i=0;i<this.size;i++)t.entries[i]=this.entries[i];return t},getArray:function(){return this.entries},getArrayCopy:function(){return new n(this.entries)},getRowDimension:function(){return this.m},getColumnDimension:function(){return this.n},index:function(t,i){return t*this.n+i},get:function(t,i){return this.entries[this.index(t,i)]},set:function(t,i,n){this.entries[this.index(t,i)]=n},getMatrix:function(t,i,n,s){for(var e=new r(i-t+1,s-n+1),h=t;i>=h;h++)for(var o=n;s>=o;o++)e.entries[e.index(h-t,o-n)]=this.entries[this.index(h,o)];return e},getArrayRowMatrix:function(t,i,n){for(var s=new r(t.length,n-i+1),e=0;e<t.length;e++)for(var h=i;n>=h;h++)s.entries[s.index(e,h-i)]=this.entries[this.index(t[e],h)];return s},transpose:function(){for(var t=new r(this.n,this.m),i=0;i<this.m;i++)for(var n=0;n<this.n;n++)t.entries[t.index(n,i)]=this.entries[this.index(i,n)];return t},norm1:function(){for(var t=0,i=0;i<this.n;i++){for(var n=0,s=0;s<this.m;s++)n+=Math.abs(this.entries[this.index(s,i)]);t=Math.max(t,n)}return t},norm2:function(){return new i.SingularValueDecomposition(this).norm2()},normInf:function(){for(var t=0,i=0;i<this.m;i++){for(var n=0,s=0;s<this.n;s++)n+=Math.abs(this.entries[this.index(i,s)]);t=Math.max(t,n)}return t},normF:function(){for(var t=0,i=0;i<this.m;i++)for(var n=0;n<this.n;n++)t=r.hypot(t,this.entries[this.index(i,n)]);return t},uminus:function(){for(var t=new r(this.m,this.n),i=0;i<this.m;i++)for(var n=0;n<this.n;n++)t.entries[t.index(i,n)]=-this.entries[this.index(i,n)];return t},plus:function(t){this.checkMatrixDimensions(t);for(var i=new r(this.m,this.n),n=0;n<this.m;n++)for(var s=0;s<this.n;s++){var e=i.index(n,s);i.entries[e]=this.entries[e]+t.entries[e]}return i},plusEquals:function(t){this.checkMatrixDimensions(t);for(var i=new r(this.m,this.n),n=0;n<this.m;n++)for(var s=0;s<this.n;s++){var e=i.index(n,s);this.entries[e]=this.entries[e]+t.entries[e]}return this},minus:function(t){this.checkMatrixDimensions(t);for(var i=new r(this.m,this.n),n=0;n<this.m;n++)for(var s=0;s<this.n;s++){var e=this.index(n,s);i.entries[e]=this.entries[e]-t.entries[e]}return i},minusEquals:function(t){this.checkMatrixDimensions(t);for(var i=0;i<this.m;i++)for(var n=0;n<this.n;n++){var s=this.index(i,n);this.entries[s]=this.entries[s]-t.entries[s]}return this},arrayTimes:function(t){this.checkMatrixDimensions(t);for(var i=new r(this.m,this.n),n=0;n<this.m;n++)for(var s=0;s<this.n;s++){var e=i.index(n,s);i.entries[e]=this.entries[e]*t.entries[e]}return i},arrayTimesEquals:function(t){this.checkMatrixDimensions(t);for(var i=0;i<this.m;i++)for(var n=0;n<this.n;n++){var s=this.index(i,n);this.entries[s]=this.entries[s]*t.entries[s]}return this},arrayRightDivide:function(t){this.checkMatrixDimensions(t);for(var i=new r(this.m,this.n),n=0;n<this.m;n++)for(var s=0;s<this.n;s++){var e=this.index(n,s);i.entries[e]=this.entries[e]/t.entries[e]}return i},arrayRightDivideEquals:function(t){this.checkMatrixDimensions(t);for(var i=0;i<this.m;i++)for(var n=0;n<this.n;n++){var s=this.index(i,n);this.entries[s]=this.entries[s]/t.entries[s]}return this},arrayLeftDivide:function(t){this.checkMatrixDimensions(t);for(var i=new r(this.m,this.n),n=0;n<this.m;n++)for(var s=0;s<this.n;s++){var e=this.index(n,s);i.entries[e]=t.entries[e]/this.entries[e]}return i},arrayLeftDivideEquals:function(t){this.checkMatrixDimensions(t);for(var i=0;i<this.m;i++)for(var n=0;n<this.n;n++){var s=this.index(i,n);this.entries[s]=t.entries[s]/this.entries[s]}return this},times:function(t){var i,s,e,h,o,m;if(t.isMatrix){if(m=t,m.m!==this.n)throw new Error("Matrix inner dimensions must agree.");i=new r(this.m,m.n);var a=new n(this.n);for(e=0;e<m.n;e++){for(h=0;h<this.n;h++)a[h]=m.entries[m.index(h,e)];for(s=0;s<this.m;s++){for(o=0,h=0;h<this.n;h++)o+=this.entries[this.index(s,h)]*a[h];i.entries[i.index(s,e)]=o}}return i}for(o=t,i=new r(this.m,this.n),s=0;s<this.m;s++)for(e=0;e<this.n;e++)i.entries[i.index(s,e)]=o*this.entries[this.index(s,e)];return i},timesEquals:function(t){for(var i=0;i<this.m;i++)for(var n=0;n<this.n;n++){var s=this.index(i,n);this.entries[s]=t*this.entries[s]}return this},solve:function(t){return this.m===this.n?new i.LUDecomposition(this).solve(t):new i.QRDecomposition(this).solve(t)},solveTranspose:function(t){return this.transpose().solve(t.transpose())},inverse:function(){return this.solve(r.identity(this.m,this.m))},det:function(){return new i.LUDecomposition(this).det()},rank:function(){return new i.SingularValueDecomposition(this).rank()},cond:function(){return new i.SingularValueDecomposition(this).cond()},trace:function(){for(var t=0,i=0;i<Math.min(this.m,this.n);i++)t+=this.entries[this.index(i,i)];return t},checkMatrixDimensions:function(t){if(t.m!==this.m||t.n!==this.n)throw new Error("Matrix dimensions must agree.")},toString:function(){var t="";t+="dim: "+this.getRowDimension()+"x"+this.getColumnDimension()+"\n";for(var i=0;i<this.getRowDimension();i++){for(var n=0;n<this.getColumnDimension();n++)t+=this.get(i,n)+" ";t+="\n"}return t},extractVector2:function(t){return new i.Vector2(this.get(0,t),this.get(1,t))},extractVector3:function(t){return new i.Vector3(this.get(0,t),this.get(1,t),this.get(2,t))},extractVector4:function(t){return new i.Vector4(this.get(0,t),this.get(1,t),this.get(2,t),this.get(3,t))},isMatrix:!0},r.identity=function(t,i){for(var n=new r(t,i),s=0;t>s;s++)for(var e=0;i>e;e++)n.entries[n.index(s,e)]=s===e?1:0;return n},r.rowVector2=function(t){return new r(1,2,[t.x,t.y])},r.rowVector3=function(t){return new r(1,3,[t.x,t.y,t.z])},r.rowVector4=function(t){return new r(1,4,[t.x,t.y,t.z,t.w])},r.rowVector=function(t){if(t.isVector2)return r.rowVector2(t);if(t.isVector3)return r.rowVector3(t);if(t.isVector4)return r.rowVector4(t);throw new Error("undetected type of vector: "+t.toString())},r.columnVector2=function(t){return new r(2,1,[t.x,t.y])},r.columnVector3=function(t){return new r(3,1,[t.x,t.y,t.z])},r.columnVector4=function(t){return new r(4,1,[t.x,t.y,t.z,t.w])},r.columnVector=function(t){if(t.isVector2)return r.columnVector2(t);if(t.isVector3)return r.columnVector3(t);if(t.isVector4)return r.columnVector4(t);throw new Error("undetected type of vector: "+t.toString())},r.fromVectors2=function(t){for(var i=2,s=t.length,e=new n(i*s),h=0;s>h;h++){var o=t[h];e[h]=o.x,e[h+s]=o.y}return new r(i,s,e,!0)},r.fromVectors3=function(t){for(var i=3,s=t.length,e=new n(i*s),h=0;s>h;h++){var o=t[h];e[h]=o.x,e[h+s]=o.y,e[h+2*s]=o.z}return new r(i,s,e,!0)},r.fromVectors4=function(t){for(var i=4,s=t.length,e=new n(i*s),h=0;s>h;h++){var o=t[h];e[h]=o.x,e[h+s]=o.y,e[h+2*s]=o.z,e[h+3*s]=o.w}return new r(i,s,e,!0)},r}),n("DOT/Matrix4",["require","DOT/dot","DOT/Vector3","DOT/Vector4"],function(t){var i=t("DOT/dot");t("DOT/Vector3"),t("DOT/Vector4");var n=window.Float32Array||Array;i.Matrix4=function(t,i,s,r,e,h,o,m,a,u,c,f,l,x,d,p,y){this.entries=new n(16),this.rowMajor(void 0===t?1:t,i||0,s||0,r||0,e||0,void 0===h?1:h,o||0,m||0,a||0,u||0,void 0===c?1:c,f||0,l||0,x||0,d||0,void 0===p?1:p,y)};var s=i.Matrix4;s.Types={OTHER:0,IDENTITY:1,TRANSLATION_3D:2,SCALING:3};var r=s.Types;return s.identity=function(){return new s(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1,r.IDENTITY)},s.translation=function(t,i,n){return new s(1,0,0,t,0,1,0,i,0,0,1,n,0,0,0,1,r.TRANSLATION_3D)},s.translationFromVector=function(t){return s.translation(t.x,t.y,t.z)},s.scaling=function(t,i,n){return i=void 0===i?t:i,n=void 0===n?t:n,new s(t,0,0,0,0,i,0,0,0,0,n,0,0,0,0,1,r.SCALING)},s.rotationAxisAngle=function(t,i){var n=Math.cos(i),e=Math.sin(i),h=1-n;return new s(t.x*t.x*h+n,t.x*t.y*h-t.z*e,t.x*t.z*h+t.y*e,0,t.y*t.x*h+t.z*e,t.y*t.y*h+n,t.y*t.z*h-t.x*e,0,t.z*t.x*h-t.y*e,t.z*t.y*h+t.x*e,t.z*t.z*h+n,0,0,0,0,1,r.OTHER)},s.rotationX=function(t){var i=Math.cos(t),n=Math.sin(t);return new s(1,0,0,0,0,i,-n,0,0,n,i,0,0,0,0,1,r.OTHER)},s.rotationY=function(t){var i=Math.cos(t),n=Math.sin(t);return new s(i,0,n,0,0,1,0,0,-n,0,i,0,0,0,0,1,r.OTHER)},s.rotationZ=function(t){var i=Math.cos(t),n=Math.sin(t);return new s(i,-n,0,0,n,i,0,0,0,0,1,0,0,0,0,1,r.OTHER)},s.gluPerspective=function(t,i,n,r){var e=Math.cos(t)/Math.sin(t);return new s(e/i,0,0,0,0,e,0,0,0,0,(r+n)/(n-r),2*r*n/(n-r),0,0,-1,0)},s.prototype={constructor:s,rowMajor:function(t,i,n,s,e,h,o,m,a,u,c,f,l,x,d,p,y){this.entries[0]=t,this.entries[1]=e,this.entries[2]=a,this.entries[3]=l,this.entries[4]=i,this.entries[5]=h,this.entries[6]=u,this.entries[7]=x,this.entries[8]=n,this.entries[9]=o,this.entries[10]=c,this.entries[11]=d,this.entries[12]=s,this.entries[13]=m,this.entries[14]=f,this.entries[15]=p,this.type=void 0===y?r.OTHER:y},columnMajor:function(t,i,n,s,r,e,h,o,m,a,u,c,f,l,x,d,p){this.rowMajor(t,r,m,f,i,e,a,l,n,h,u,x,s,o,c,d,p)},m00:function(){return this.entries[0]},m01:function(){return this.entries[4]},m02:function(){return this.entries[8]},m03:function(){return this.entries[12]},m10:function(){return this.entries[1]},m11:function(){return this.entries[5]},m12:function(){return this.entries[9]},m13:function(){return this.entries[13]},m20:function(){return this.entries[2]},m21:function(){return this.entries[6]},m22:function(){return this.entries[10]},m23:function(){return this.entries[14]},m30:function(){return this.entries[3]},m31:function(){return this.entries[7]},m32:function(){return this.entries[11]},m33:function(){return this.entries[15]},plus:function(t){return new s(this.m00()+t.m00(),this.m01()+t.m01(),this.m02()+t.m02(),this.m03()+t.m03(),this.m10()+t.m10(),this.m11()+t.m11(),this.m12()+t.m12(),this.m13()+t.m13(),this.m20()+t.m20(),this.m21()+t.m21(),this.m22()+t.m22(),this.m23()+t.m23(),this.m30()+t.m30(),this.m31()+t.m31(),this.m32()+t.m32(),this.m33()+t.m33())},minus:function(t){return new s(this.m00()-t.m00(),this.m01()-t.m01(),this.m02()-t.m02(),this.m03()-t.m03(),this.m10()-t.m10(),this.m11()-t.m11(),this.m12()-t.m12(),this.m13()-t.m13(),this.m20()-t.m20(),this.m21()-t.m21(),this.m22()-t.m22(),this.m23()-t.m23(),this.m30()-t.m30(),this.m31()-t.m31(),this.m32()-t.m32(),this.m33()-t.m33())},transposed:function(){return new s(this.m00(),this.m10(),this.m20(),this.m30(),this.m01(),this.m11(),this.m21(),this.m31(),this.m02(),this.m12(),this.m22(),this.m32(),this.m03(),this.m13(),this.m23(),this.m33())},negated:function(){return new s(-this.m00(),-this.m01(),-this.m02(),-this.m03(),-this.m10(),-this.m11(),-this.m12(),-this.m13(),-this.m20(),-this.m21(),-this.m22(),-this.m23(),-this.m30(),-this.m31(),-this.m32(),-this.m33())},inverted:function(){var t=this.determinant();if(0!==t)return new s((-this.m31()*this.m22()*this.m13()+this.m21()*this.m32()*this.m13()+this.m31()*this.m12()*this.m23()-this.m11()*this.m32()*this.m23()-this.m21()*this.m12()*this.m33()+this.m11()*this.m22()*this.m33())/t,(this.m31()*this.m22()*this.m03()-this.m21()*this.m32()*this.m03()-this.m31()*this.m02()*this.m23()+this.m01()*this.m32()*this.m23()+this.m21()*this.m02()*this.m33()-this.m01()*this.m22()*this.m33())/t,(-this.m31()*this.m12()*this.m03()+this.m11()*this.m32()*this.m03()+this.m31()*this.m02()*this.m13()-this.m01()*this.m32()*this.m13()-this.m11()*this.m02()*this.m33()+this.m01()*this.m12()*this.m33())/t,(this.m21()*this.m12()*this.m03()-this.m11()*this.m22()*this.m03()-this.m21()*this.m02()*this.m13()+this.m01()*this.m22()*this.m13()+this.m11()*this.m02()*this.m23()-this.m01()*this.m12()*this.m23())/t,(this.m30()*this.m22()*this.m13()-this.m20()*this.m32()*this.m13()-this.m30()*this.m12()*this.m23()+this.m10()*this.m32()*this.m23()+this.m20()*this.m12()*this.m33()-this.m10()*this.m22()*this.m33())/t,(-this.m30()*this.m22()*this.m03()+this.m20()*this.m32()*this.m03()+this.m30()*this.m02()*this.m23()-this.m00()*this.m32()*this.m23()-this.m20()*this.m02()*this.m33()+this.m00()*this.m22()*this.m33())/t,(this.m30()*this.m12()*this.m03()-this.m10()*this.m32()*this.m03()-this.m30()*this.m02()*this.m13()+this.m00()*this.m32()*this.m13()+this.m10()*this.m02()*this.m33()-this.m00()*this.m12()*this.m33())/t,(-this.m20()*this.m12()*this.m03()+this.m10()*this.m22()*this.m03()+this.m20()*this.m02()*this.m13()-this.m00()*this.m22()*this.m13()-this.m10()*this.m02()*this.m23()+this.m00()*this.m12()*this.m23())/t,(-this.m30()*this.m21()*this.m13()+this.m20()*this.m31()*this.m13()+this.m30()*this.m11()*this.m23()-this.m10()*this.m31()*this.m23()-this.m20()*this.m11()*this.m33()+this.m10()*this.m21()*this.m33())/t,(this.m30()*this.m21()*this.m03()-this.m20()*this.m31()*this.m03()-this.m30()*this.m01()*this.m23()+this.m00()*this.m31()*this.m23()+this.m20()*this.m01()*this.m33()-this.m00()*this.m21()*this.m33())/t,(-this.m30()*this.m11()*this.m03()+this.m10()*this.m31()*this.m03()+this.m30()*this.m01()*this.m13()-this.m00()*this.m31()*this.m13()-this.m10()*this.m01()*this.m33()+this.m00()*this.m11()*this.m33())/t,(this.m20()*this.m11()*this.m03()-this.m10()*this.m21()*this.m03()-this.m20()*this.m01()*this.m13()+this.m00()*this.m21()*this.m13()+this.m10()*this.m01()*this.m23()-this.m00()*this.m11()*this.m23())/t,(this.m30()*this.m21()*this.m12()-this.m20()*this.m31()*this.m12()-this.m30()*this.m11()*this.m22()+this.m10()*this.m31()*this.m22()+this.m20()*this.m11()*this.m32()-this.m10()*this.m21()*this.m32())/t,(-this.m30()*this.m21()*this.m02()+this.m20()*this.m31()*this.m02()+this.m30()*this.m01()*this.m22()-this.m00()*this.m31()*this.m22()-this.m20()*this.m01()*this.m32()+this.m00()*this.m21()*this.m32())/t,(this.m30()*this.m11()*this.m02()-this.m10()*this.m31()*this.m02()-this.m30()*this.m01()*this.m12()+this.m00()*this.m31()*this.m12()+this.m10()*this.m01()*this.m32()-this.m00()*this.m11()*this.m32())/t,(-this.m20()*this.m11()*this.m02()+this.m10()*this.m21()*this.m02()+this.m20()*this.m01()*this.m12()-this.m00()*this.m21()*this.m12()-this.m10()*this.m01()*this.m22()+this.m00()*this.m11()*this.m22())/t);throw new Error("Matrix could not be inverted, determinant === 0")},timesMatrix:function(t){var i=r.OTHER;return this.type===r.TRANSLATION_3D&&t.type===r.TRANSLATION_3D&&(i=r.TRANSLATION_3D),this.type===r.SCALING&&t.type===r.SCALING&&(i=r.SCALING),this.type===r.IDENTITY&&(i=t.type),t.type===r.IDENTITY&&(i=this.type),new s(this.m00()*t.m00()+this.m01()*t.m10()+this.m02()*t.m20()+this.m03()*t.m30(),this.m00()*t.m01()+this.m01()*t.m11()+this.m02()*t.m21()+this.m03()*t.m31(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02()*t.m22()+this.m03()*t.m32(),this.m00()*t.m03()+this.m01()*t.m13()+this.m02()*t.m23()+this.m03()*t.m33(),this.m10()*t.m00()+this.m11()*t.m10()+this.m12()*t.m20()+this.m13()*t.m30(),this.m10()*t.m01()+this.m11()*t.m11()+this.m12()*t.m21()+this.m13()*t.m31(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12()*t.m22()+this.m13()*t.m32(),this.m10()*t.m03()+this.m11()*t.m13()+this.m12()*t.m23()+this.m13()*t.m33(),this.m20()*t.m00()+this.m21()*t.m10()+this.m22()*t.m20()+this.m23()*t.m30(),this.m20()*t.m01()+this.m21()*t.m11()+this.m22()*t.m21()+this.m23()*t.m31(),this.m20()*t.m02()+this.m21()*t.m12()+this.m22()*t.m22()+this.m23()*t.m32(),this.m20()*t.m03()+this.m21()*t.m13()+this.m22()*t.m23()+this.m23()*t.m33(),this.m30()*t.m00()+this.m31()*t.m10()+this.m32()*t.m20()+this.m33()*t.m30(),this.m30()*t.m01()+this.m31()*t.m11()+this.m32()*t.m21()+this.m33()*t.m31(),this.m30()*t.m02()+this.m31()*t.m12()+this.m32()*t.m22()+this.m33()*t.m32(),this.m30()*t.m03()+this.m31()*t.m13()+this.m32()*t.m23()+this.m33()*t.m33(),i)},timesVector4:function(t){var n=this.m00()*t.x+this.m01()*t.y+this.m02()*t.z+this.m03()*t.w,s=this.m10()*t.x+this.m11()*t.y+this.m12()*t.z+this.m13()*t.w,r=this.m20()*t.x+this.m21()*t.y+this.m22()*t.z+this.m23()*t.w,e=this.m30()*t.x+this.m31()*t.y+this.m32()*t.z+this.m33()*t.w;return new i.Vector4(n,s,r,e)},timesVector3:function(t){return this.timesVector4(t.toVector4()).toVector3()},timesTransposeVector4:function(t){var n=this.m00()*t.x+this.m10()*t.y+this.m20()*t.z+this.m30()*t.w,s=this.m01()*t.x+this.m11()*t.y+this.m21()*t.z+this.m31()*t.w,r=this.m02()*t.x+this.m12()*t.y+this.m22()*t.z+this.m32()*t.w,e=this.m03()*t.x+this.m13()*t.y+this.m23()*t.z+this.m33()*t.w;return new i.Vector4(n,s,r,e)},timesTransposeVector3:function(t){return this.timesTransposeVector4(t.toVector4()).toVector3()},timesRelativeVector3:function(t){var n=this.m00()*t.x+this.m10()*t.y+this.m20()*t.z,s=this.m01()*t.y+this.m11()*t.y+this.m21()*t.z,r=this.m02()*t.z+this.m12()*t.y+this.m22()*t.z;return new i.Vector3(n,s,r)},determinant:function(){return this.m03()*this.m12()*this.m21()*this.m30()-this.m02()*this.m13()*this.m21()*this.m30()-this.m03()*this.m11()*this.m22()*this.m30()+this.m01()*this.m13()*this.m22()*this.m30()+this.m02()*this.m11()*this.m23()*this.m30()-this.m01()*this.m12()*this.m23()*this.m30()-this.m03()*this.m12()*this.m20()*this.m31()+this.m02()*this.m13()*this.m20()*this.m31()+this.m03()*this.m10()*this.m22()*this.m31()-this.m00()*this.m13()*this.m22()*this.m31()-this.m02()*this.m10()*this.m23()*this.m31()+this.m00()*this.m12()*this.m23()*this.m31()+this.m03()*this.m11()*this.m20()*this.m32()-this.m01()*this.m13()*this.m20()*this.m32()-this.m03()*this.m10()*this.m21()*this.m32()+this.m00()*this.m13()*this.m21()*this.m32()+this.m01()*this.m10()*this.m23()*this.m32()-this.m00()*this.m11()*this.m23()*this.m32()-this.m02()*this.m11()*this.m20()*this.m33()+this.m01()*this.m12()*this.m20()*this.m33()+this.m02()*this.m10()*this.m21()*this.m33()-this.m00()*this.m12()*this.m21()*this.m33()-this.m01()*this.m10()*this.m22()*this.m33()+this.m00()*this.m11()*this.m22()*this.m33()},toString:function(){return this.m00()+" "+this.m01()+" "+this.m02()+" "+this.m03()+"\n"+this.m10()+" "+this.m11()+" "+this.m12()+" "+this.m13()+"\n"+this.m20()+" "+this.m21()+" "+this.m22()+" "+this.m23()+"\n"+this.m30()+" "+this.m31()+" "+this.m32()+" "+this.m33()},translation:function(){return new i.Vector3(this.m03(),this.m13(),this.m23())},scaling:function(){return new i.Vector3(this.m00(),this.m11(),this.m22())},makeImmutable:function(){this.rowMajor=function(){throw new Error("Cannot modify immutable matrix")}}},s.IDENTITY=new s,s.IDENTITY.makeImmutable(),s}),n("DOT/Matrix3",["require","DOT/dot","DOT/Vector2","DOT/Vector3","DOT/Matrix4"],function(t){var i=t("DOT/dot"),n=i.FastArray;t("DOT/Vector2"),t("DOT/Vector3"),t("DOT/Matrix4"),i.Matrix3=function(t,i,s,r,e,h,o,m,a,u){this.entries=new n(9),this.rowMajor(void 0===t?1:t,i||0,s||0,r||0,void 0===e?1:e,h||0,o||0,m||0,void 0===a?1:a,u)};var s=i.Matrix3;s.Types={OTHER:0,IDENTITY:1,TRANSLATION_2D:2,SCALING:3,AFFINE:4};var r=s.Types;return s.identity=function(){return new s(1,0,0,0,1,0,0,0,1,r.IDENTITY)},s.translation=function(t,i){return new s(1,0,t,0,1,i,0,0,1,r.TRANSLATION_2D)},s.translationFromVector=function(t){return s.translation(t.x,t.y)},s.scaling=function(t,i){return i=void 0===i?t:i,new s(t,0,0,0,i,0,0,0,1,r.SCALING)},s.scale=s.scaling,s.affine=function(t,i,n,e,h,o){return new s(t,n,h,i,e,o,0,0,1,r.AFFINE)},s.rotationAxisAngle=function(t,i){var n=Math.cos(i),e=Math.sin(i),h=1-n;return new s(t.x*t.x*h+n,t.x*t.y*h-t.z*e,t.x*t.z*h+t.y*e,t.y*t.x*h+t.z*e,t.y*t.y*h+n,t.y*t.z*h-t.x*e,t.z*t.x*h-t.y*e,t.z*t.y*h+t.x*e,t.z*t.z*h+n,r.OTHER)
},s.rotationX=function(t){var i=Math.cos(t),n=Math.sin(t);return new s(1,0,0,0,i,-n,0,n,i,r.OTHER)},s.rotationY=function(t){var i=Math.cos(t),n=Math.sin(t);return new s(i,0,n,0,1,0,-n,0,i,r.OTHER)},s.rotationZ=function(t){var i=Math.cos(t),n=Math.sin(t);return new s(i,-n,0,n,i,0,0,0,1,r.AFFINE)},s.rotation2=s.rotationZ,s.fromSVGMatrix=function(t){return new s(t.a,t.c,t.e,t.b,t.d,t.f,0,0,1,r.AFFINE)},s.rotateAToB=function(t,n){var r,e,h,o=t,m=n,a=1e-4,u=o.cross(m);if(r=o.dot(m),h=0>r?-r:r,h>1-a){var c,f,l,x=new i.Vector3(o.x>0?o.x:-o.x,o.y>0?o.y:-o.y,o.z>0?o.z:-o.z);x=x.x<x.y?x.x<x.z?i.Vector3.X_UNIT:i.Vector3.Z_UNIT:x.y<x.z?i.Vector3.Y_UNIT:i.Vector3.Z_UNIT;var d=x.minus(o);return u=x.minus(m),c=2/d.dot(d),f=2/u.dot(u),l=c*f*d.dot(u),s.IDENTITY.plus(s.rowMajor(-c*d.x*d.x-f*u.x*u.x+l*u.x*d.x,-c*d.x*d.y-f*u.x*u.y+l*u.x*d.y,-c*d.x*d.z-f*u.x*u.z+l*u.x*d.z,-c*d.y*d.x-f*u.y*u.x+l*u.y*d.x,-c*d.y*d.y-f*u.y*u.y+l*u.y*d.y,-c*d.y*d.z-f*u.y*u.z+l*u.y*d.z,-c*d.z*d.x-f*u.z*u.x+l*u.z*d.x,-c*d.z*d.y-f*u.z*u.y+l*u.z*d.y,-c*d.z*d.z-f*u.z*u.z+l*u.z*d.z))}var p,y,v,w,T;return e=1/(1+r),p=e*u.x,y=e*u.z,v=p*u.y,w=p*u.z,T=y*u.y,s.rowMajor(r+p*u.x,v-u.z,w+u.y,v+u.z,r+e*u.y*u.y,T-u.x,w-u.y,T+u.x,r+y*u.z)},s.prototype={constructor:s,m00:function(){return this.entries[0]},m01:function(){return this.entries[3]},m02:function(){return this.entries[6]},m10:function(){return this.entries[1]},m11:function(){return this.entries[4]},m12:function(){return this.entries[7]},m20:function(){return this.entries[2]},m21:function(){return this.entries[5]},m22:function(){return this.entries[8]},isAffine:function(){return this.type===r.AFFINE||0===this.m20()&&0===this.m21()&&1===this.m22()},isFinite:function(){return isFinite(this.m00())&&isFinite(this.m01())&&isFinite(this.m02())&&isFinite(this.m10())&&isFinite(this.m11())&&isFinite(this.m12())&&isFinite(this.m20())&&isFinite(this.m21())&&isFinite(this.m22())},getDeterminant:function(){return this.m00()*this.m11()*this.m22()+this.m01()*this.m12()*this.m20()+this.m02()*this.m10()*this.m21()-this.m02()*this.m11()*this.m20()-this.m01()*this.m10()*this.m22()-this.m00()*this.m12()*this.m21()},get determinant(){return this.getDeterminant()},getTranslation:function(){return new i.Vector2(this.m02(),this.m12())},get translation(){return this.getTranslation()},getScaleVector:function(){return new i.Vector2(Math.sqrt(this.m00()*this.m00()+this.m10()*this.m10()),Math.sqrt(this.m01()*this.m01()+this.m11()*this.m11()))},get scaleVector(){return this.getScaleVector()},getRotation:function(){var t=this.timesVector2(i.Vector2.X_UNIT).minus(this.timesVector2(i.Vector2.ZERO));return Math.atan2(t.y,t.x)},get rotation(){return this.getRotation()},toMatrix4:function(){return new i.Matrix4(this.m00(),this.m01(),this.m02(),0,this.m10(),this.m11(),this.m12(),0,this.m20(),this.m21(),this.m22(),0,0,0,0,1)},toString:function(){return this.m00()+" "+this.m01()+" "+this.m02()+"\n"+this.m10()+" "+this.m11()+" "+this.m12()+"\n"+this.m20()+" "+this.m21()+" "+this.m22()},toSVGMatrix:function(){var t=document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix();return t.a=this.m00(),t.b=this.m10(),t.c=this.m01(),t.d=this.m11(),t.e=this.m02(),t.f=this.m12(),t},getCSSTransform:function(){return"matrix("+this.entries[0].toFixed(20)+","+this.entries[1].toFixed(20)+","+this.entries[3].toFixed(20)+","+this.entries[4].toFixed(20)+","+this.entries[6].toFixed(20)+","+this.entries[7].toFixed(20)+")"},get cssTransform(){return this.getCSSTransform()},getSVGTransform:function(){function t(t){return t.toFixed(20)}switch(this.type){case r.IDENTITY:return"";case r.TRANSLATION_2D:return"translate("+t(this.entries[6])+","+this.entries[7]+")";case r.SCALING:return"scale("+t(this.entries[0])+(this.entries[0]===this.entries[4]?"":","+t(this.entries[4]))+")";default:return"matrix("+t(this.entries[0])+","+t(this.entries[1])+","+t(this.entries[3])+","+t(this.entries[4])+","+t(this.entries[6])+","+t(this.entries[7])+")"}},get svgTransform(){return this.getSVGTransform()},getCSSTransformStyles:function(){var t=this.getCSSTransform();return{"-webkit-perspective":1e3,"-webkit-backface-visibility":"hidden","-webkit-transform":t+" translateZ(0)","-moz-transform":t+" translateZ(0)","-ms-transform":t,"-o-transform":t,transform:t,"transform-origin":"top left","-ms-transform-origin":"top left"}},get cssTransformStyles(){return this.getCSSTransformStyles()},equals:function(t){return this.m00()===t.m00()&&this.m01()===t.m01()&&this.m02()===t.m02()&&this.m10()===t.m10()&&this.m11()===t.m11()&&this.m12()===t.m12()&&this.m20()===t.m20()&&this.m21()===t.m21()&&this.m22()===t.m22()},equalsEpsilon:function(t,i){return Math.abs(this.m00()-t.m00())<i&&Math.abs(this.m01()-t.m01())<i&&Math.abs(this.m02()-t.m02())<i&&Math.abs(this.m10()-t.m10())<i&&Math.abs(this.m11()-t.m11())<i&&Math.abs(this.m12()-t.m12())<i&&Math.abs(this.m20()-t.m20())<i&&Math.abs(this.m21()-t.m21())<i&&Math.abs(this.m22()-t.m22())<i},copy:function(){return new s(this.m00(),this.m01(),this.m02(),this.m10(),this.m11(),this.m12(),this.m20(),this.m21(),this.m22(),this.type)},plus:function(t){return new s(this.m00()+t.m00(),this.m01()+t.m01(),this.m02()+t.m02(),this.m10()+t.m10(),this.m11()+t.m11(),this.m12()+t.m12(),this.m20()+t.m20(),this.m21()+t.m21(),this.m22()+t.m22())},minus:function(t){return new s(this.m00()-t.m00(),this.m01()-t.m01(),this.m02()-t.m02(),this.m10()-t.m10(),this.m11()-t.m11(),this.m12()-t.m12(),this.m20()-t.m20(),this.m21()-t.m21(),this.m22()-t.m22())},transposed:function(){return new s(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===r.IDENTITY||this.type===r.SCALING?this.type:void 0)},negated:function(){return new s(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())},inverted:function(){var t;switch(this.type){case r.IDENTITY:return this;case r.TRANSLATION_2D:return new s(1,0,-this.m02(),0,1,-this.m12(),0,0,1,r.TRANSLATION_2D);case r.SCALING:return new s(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),r.SCALING);case r.AFFINE:if(t=this.getDeterminant(),0!==t)return new s((-this.m12()*this.m21()+this.m11()*this.m22())/t,(this.m02()*this.m21()-this.m01()*this.m22())/t,(-this.m02()*this.m11()+this.m01()*this.m12())/t,(this.m12()*this.m20()-this.m10()*this.m22())/t,(-this.m02()*this.m20()+this.m00()*this.m22())/t,(this.m02()*this.m10()-this.m00()*this.m12())/t,0,0,1,r.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case r.OTHER:if(t=this.getDeterminant(),0!==t)return new s((-this.m12()*this.m21()+this.m11()*this.m22())/t,(this.m02()*this.m21()-this.m01()*this.m22())/t,(-this.m02()*this.m11()+this.m01()*this.m12())/t,(this.m12()*this.m20()-this.m10()*this.m22())/t,(-this.m02()*this.m20()+this.m00()*this.m22())/t,(this.m02()*this.m10()-this.m00()*this.m12())/t,(-this.m11()*this.m20()+this.m10()*this.m21())/t,(this.m01()*this.m20()-this.m00()*this.m21())/t,(-this.m01()*this.m10()+this.m00()*this.m11())/t,r.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix3.inverted with unknown type: "+this.type)}},timesMatrix:function(t){if(this.type===r.IDENTITY||t.type===r.IDENTITY)return this.type===r.IDENTITY?t:this;if(this.type===t.type){if(this.type===r.TRANSLATION_2D)return new s(1,0,this.m02()+t.m02(),0,1,this.m12()+t.m12(),0,0,1,r.TRANSLATION_2D);if(this.type===r.SCALING)return new s(this.m00()*t.m00(),0,0,0,this.m11()*t.m11(),0,0,0,1,r.SCALING)}return this.type!==r.OTHER&&t.type!==r.OTHER?new s(this.m00()*t.m00()+this.m01()*t.m10(),this.m00()*t.m01()+this.m01()*t.m11(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02(),this.m10()*t.m00()+this.m11()*t.m10(),this.m10()*t.m01()+this.m11()*t.m11(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12(),0,0,1,r.AFFINE):new s(this.m00()*t.m00()+this.m01()*t.m10()+this.m02()*t.m20(),this.m00()*t.m01()+this.m01()*t.m11()+this.m02()*t.m21(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02()*t.m22(),this.m10()*t.m00()+this.m11()*t.m10()+this.m12()*t.m20(),this.m10()*t.m01()+this.m11()*t.m11()+this.m12()*t.m21(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12()*t.m22(),this.m20()*t.m00()+this.m21()*t.m10()+this.m22()*t.m20(),this.m20()*t.m01()+this.m21()*t.m11()+this.m22()*t.m21(),this.m20()*t.m02()+this.m21()*t.m12()+this.m22()*t.m22())},timesVector2:function(t){var n=this.m00()*t.x+this.m01()*t.y+this.m02(),s=this.m10()*t.x+this.m11()*t.y+this.m12();return new i.Vector2(n,s)},timesVector3:function(t){var n=this.m00()*t.x+this.m01()*t.y+this.m02()*t.z,s=this.m10()*t.x+this.m11()*t.y+this.m12()*t.z,r=this.m20()*t.x+this.m21()*t.y+this.m22()*t.z;return new i.Vector3(n,s,r)},timesTransposeVector2:function(t){var n=this.m00()*t.x+this.m10()*t.y,s=this.m01()*t.x+this.m11()*t.y;return new i.Vector2(n,s)},timesRelativeVector2:function(t){var n=this.m00()*t.x+this.m01()*t.y,s=this.m10()*t.y+this.m11()*t.y;return new i.Vector2(n,s)},makeImmutable:function(){return this.rowMajor=function(){throw new Error("Cannot modify immutable matrix")},this},rowMajor:function(t,i,n,s,e,h,o,m,a,u){return this.entries[0]=t,this.entries[1]=s,this.entries[2]=o,this.entries[3]=i,this.entries[4]=e,this.entries[5]=m,this.entries[6]=n,this.entries[7]=h,this.entries[8]=a,this.type=void 0===u?0===o&&0===m&&1===a?r.AFFINE:r.OTHER:u,this},columnMajor:function(t,i,n,s,r,e,h,o,m,a){return this.rowMajor(t,s,h,i,r,o,n,e,m,a)},add:function(t){return this.rowMajor(this.m00()+t.m00(),this.m01()+t.m01(),this.m02()+t.m02(),this.m10()+t.m10(),this.m11()+t.m11(),this.m12()+t.m12(),this.m20()+t.m20(),this.m21()+t.m21(),this.m22()+t.m22())},subtract:function(t){return this.rowMajor(this.m00()-t.m00(),this.m01()-t.m01(),this.m02()-t.m02(),this.m10()-t.m10(),this.m11()-t.m11(),this.m12()-t.m12(),this.m20()-t.m20(),this.m21()-t.m21(),this.m22()-t.m22())},transpose:function(){return this.rowMajor(this.m00(),this.m10(),this.m20(),this.m01(),this.m11(),this.m21(),this.m02(),this.m12(),this.m22(),this.type===r.IDENTITY||this.type===r.SCALING?this.type:void 0)},negate:function(){return this.rowMajor(-this.m00(),-this.m01(),-this.m02(),-this.m10(),-this.m11(),-this.m12(),-this.m20(),-this.m21(),-this.m22())},invert:function(){var t;switch(this.type){case r.IDENTITY:return this;case r.TRANSLATION_2D:return this.rowMajor(1,0,-this.m02(),0,1,-this.m12(),0,0,1,r.TRANSLATION_2D);case r.SCALING:return this.rowMajor(1/this.m00(),0,0,0,1/this.m11(),0,0,0,1/this.m22(),r.SCALING);case r.AFFINE:if(t=this.getDeterminant(),0!==t)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/t,(this.m02()*this.m21()-this.m01()*this.m22())/t,(-this.m02()*this.m11()+this.m01()*this.m12())/t,(this.m12()*this.m20()-this.m10()*this.m22())/t,(-this.m02()*this.m20()+this.m00()*this.m22())/t,(this.m02()*this.m10()-this.m00()*this.m12())/t,0,0,1,r.AFFINE);throw new Error("Matrix could not be inverted, determinant === 0");case r.OTHER:if(t=this.getDeterminant(),0!==t)return this.rowMajor((-this.m12()*this.m21()+this.m11()*this.m22())/t,(this.m02()*this.m21()-this.m01()*this.m22())/t,(-this.m02()*this.m11()+this.m01()*this.m12())/t,(this.m12()*this.m20()-this.m10()*this.m22())/t,(-this.m02()*this.m20()+this.m00()*this.m22())/t,(this.m02()*this.m10()-this.m00()*this.m12())/t,(-this.m11()*this.m20()+this.m10()*this.m21())/t,(this.m01()*this.m20()-this.m00()*this.m21())/t,(-this.m01()*this.m10()+this.m00()*this.m11())/t,r.OTHER);throw new Error("Matrix could not be inverted, determinant === 0");default:throw new Error("Matrix3.inverted with unknown type: "+this.type)}},multiplyMatrix:function(t){if(this.type===r.IDENTITY||t.type===r.IDENTITY)return this.type===r.IDENTITY?t:this;if(this.type===t.type){if(this.type===r.TRANSLATION_2D)return this.rowMajor(1,0,this.m02()+t.m02(),0,1,this.m12()+t.m12(),0,0,1,r.TRANSLATION_2D);if(this.type===r.SCALING)return this.rowMajor(this.m00()*t.m00(),0,0,0,this.m11()*t.m11(),0,0,0,1,r.SCALING)}return this.type!==r.OTHER&&t.type!==r.OTHER?this.rowMajor(this.m00()*t.m00()+this.m01()*t.m10(),this.m00()*t.m01()+this.m01()*t.m11(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02(),this.m10()*t.m00()+this.m11()*t.m10(),this.m10()*t.m01()+this.m11()*t.m11(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12(),0,0,1,r.AFFINE):this.rowMajor(this.m00()*t.m00()+this.m01()*t.m10()+this.m02()*t.m20(),this.m00()*t.m01()+this.m01()*t.m11()+this.m02()*t.m21(),this.m00()*t.m02()+this.m01()*t.m12()+this.m02()*t.m22(),this.m10()*t.m00()+this.m11()*t.m10()+this.m12()*t.m20(),this.m10()*t.m01()+this.m11()*t.m11()+this.m12()*t.m21(),this.m10()*t.m02()+this.m11()*t.m12()+this.m12()*t.m22(),this.m20()*t.m00()+this.m21()*t.m10()+this.m22()*t.m20(),this.m20()*t.m01()+this.m21()*t.m11()+this.m22()*t.m21(),this.m20()*t.m02()+this.m21()*t.m12()+this.m22()*t.m22())},multiplyVector2:function(t){var i=this.m00()*t.x+this.m01()*t.y+this.m02(),n=this.m10()*t.x+this.m11()*t.y+this.m12();return t.setX(i),t.setY(n),t},multiplyVector3:function(t){var i=this.m00()*t.x+this.m01()*t.y+this.m02()*t.z,n=this.m10()*t.x+this.m11()*t.y+this.m12()*t.z,s=this.m20()*t.x+this.m21()*t.y+this.m22()*t.z;return t.setX(i),t.setY(n),t.setZ(s),t},multiplyTransposeVector2:function(t){var i=this.m00()*t.x+this.m10()*t.y,n=this.m01()*t.x+this.m11()*t.y;return t.setX(i),t.setY(n),t},multiplyRelativeVector2:function(t){var i=this.m00()*t.x+this.m01()*t.y,n=this.m10()*t.y+this.m11()*t.y;return t.setX(i),t.setY(n),t},canvasSetTransform:function(t){t.setTransform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])},canvasAppendTransform:function(t){this.type!==r.IDENTITY&&t.transform(this.entries[0],this.entries[1],this.entries[3],this.entries[4],this.entries[6],this.entries[7])}},s.IDENTITY=new s(1,0,0,0,1,0,0,0,1,r.IDENTITY),s.IDENTITY.makeImmutable(),s.X_REFLECTION=new s(-1,0,0,0,1,0,0,0,1,r.AFFINE),s.X_REFLECTION.makeImmutable(),s.Y_REFLECTION=new s(1,0,0,0,-1,0,0,0,1,r.AFFINE),s.Y_REFLECTION.makeImmutable(),s.translationTimesMatrix=function(t,i,n){var e;return n.type===r.IDENTITY||n.type===r.TRANSLATION_2D?new s(1,0,n.m02()+t,0,1,n.m12()+i,0,0,1,r.TRANSLATION_2D):(e=n.type===r.OTHER?r.OTHER:r.AFFINE,new s(n.m00(),n.m01(),n.m02()+t,n.m10(),n.m11(),n.m12()+i,n.m20(),n.m21(),n.m22(),e))},s.printer={print:function(t){console.log(t.toString())}},s}),n("DOT/Permutation",["require","DOT/dot","PHET_CORE/isArray","DOT/Util"],function(t){function i(t,n,s){if(0===t.length)s.call(void 0,n);else for(var r=0;r<t.length;r++){var e=t[r],h=t.slice(0);h.splice(r,1);var o=n.slice(0);o.push(e),i(h,o,s)}}var n=t("DOT/dot"),s=t("PHET_CORE/isArray");t("DOT/Util");var r=function(t){this.indices=t};return r.identity=function(t){for(var i=new Array(t),n=0;t>n;n++)i[n]=n;return new r(i)},r.permutations=function(t){var i=[];return r.forEachPermutation(n.rangeInclusive(0,t-1),function(t){i.push(new r(t))}),i},r.forEachPermutation=function(t,n){i(t,[],n)},r.prototype={constructor:r,size:function(){return this.indices.length},apply:function(t){if(s(t)){if(t.length!==this.size())throw new Error("Permutation length "+this.size()+" not equal to list length "+t.length);for(var i=new Array(t.length),n=0;n<t.length;n++)i[n]=t[this.indices[n]];return i}return this.indices[t]},inverted:function(){for(var t=new Array(this.size()),i=0;i<this.size();i++)t[this.indices[i]]=i;return new r(t)},withIndicesPermuted:function(t){var i=[],n=this;return r.forEachPermutation(t,function(s){for(var e=n.indices,h=e.slice(0),o=0;o<t.length;o++)h[t[o]]=e[s[o]];i.push(new r(h))}),i},toString:function(){return"P["+this.indices.join(", ")+"]"}},r.testMe=function(t){var i=new r([1,4,3,2,0]);t.log(i.toString());var n=i.inverted();t.log(n.toString()),t.log(n.withIndicesPermuted([0,3,4]).toString()),t.log(r.permutations(4).toString())},r}),n("DOT/Ray2",["require","DOT/dot"],function(t){var i=t("DOT/dot");i.Ray2=function(t,i){this.pos=t,this.dir=i};var n=i.Ray2;return n.prototype={constructor:n,shifted:function(t){return new n(this.pointAtDistance(t),this.dir)},pointAtDistance:function(t){return this.pos.plus(this.dir.timesScalar(t))},toString:function(){return this.pos.toString()+" => "+this.dir.toString()}},n}),n("DOT/Ray3",["require","DOT/dot"],function(t){var i=t("DOT/dot");i.Ray3=function(t,i){this.pos=t,this.dir=i};var n=i.Ray3;return n.prototype={constructor:n,shifted:function(t){return new n(this.pointAtDistance(t),this.dir)},pointAtDistance:function(t){return this.pos.plus(this.dir.timesScalar(t))},toString:function(){return this.pos.toString()+" => "+this.dir.toString()}},n}),n("DOT/Rectangle",["require","DOT/dot","PHET_CORE/inherit","DOT/Bounds2"],function(t){var i=t("DOT/dot"),n=t("PHET_CORE/inherit"),s=t("DOT/Bounds2");i.Rectangle=function(t,i,n,r){s.call(this,t,i,t+n,i+r)};var r=i.Rectangle;return n(s,r),r}),n("DOT/Transform3",["require","DOT/dot","DOT/Matrix3","DOT/Vector2","DOT/Ray2"],function(t){var i=t("DOT/dot");t("DOT/Matrix3"),t("DOT/Vector2"),t("DOT/Ray2"),i.Transform3=function(t){this.listeners=[],this.set(void 0===t?i.Matrix3.IDENTITY:t)};var n=i.Transform3;return n.prototype={constructor:n,set:function(t){var i,n=this.matrix,s=this.listeners.length;for(i=0;s>i;i++)this.listeners[i].before(t,n);for(this.matrix=t,this.inverse=null,this.matrixTransposed=null,this.inverseTransposed=null,i=0;s>i;i++)this.listeners[i].after(t,n)},prepend:function(t){this.set(t.timesMatrix(this.matrix))},prependTranslation:function(t,n){this.set(i.Matrix3.translationTimesMatrix(t,n,this.matrix))},append:function(t){this.set(this.matrix.timesMatrix(t))},prependTransform:function(t){this.prepend(t.matrix)},appendTransform:function(t){this.append(t.matrix)},applyToCanvasContext:function(t){t.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m02(),this.matrix.m12())},copy:function(){var t=new n(this.matrix);t.inverse=this.inverse,t.matrixTransposed=this.matrixTransposed,t.inverseTransposed=this.inverseTransposed},deepCopy:function(){var t=new n(this.matrix.copy());t.inverse=this.inverse?this.inverse.copy():null,t.matrixTransposed=this.matrixTransposed?this.matrixTransposed.copy():null,t.inverseTransposed=this.inverseTransposed?this.inverseTransposed.copy():null},getMatrix:function(){return this.matrix},getInverse:function(){return null===this.inverse&&(this.inverse=this.matrix.inverted()),this.inverse},getMatrixTransposed:function(){return null===this.matrixTransposed&&(this.matrixTransposed=this.matrix.transposed()),this.matrixTransposed},getInverseTransposed:function(){return null===this.inverseTransposed&&(this.inverseTransposed=this.getInverse().transposed()),this.inverseTransposed},isIdentity:function(){return this.matrix.type===i.Matrix3.Types.IDENTITY},isFinite:function(){return this.matrix.isFinite()},transformPosition2:function(t){return this.matrix.timesVector2(t)},transformDelta2:function(t){var n=this.getMatrix();return new i.Vector2(n.m00()*t.x+n.m01()*t.y,n.m10()*t.x+n.m11()*t.y)},transformNormal2:function(t){return this.getInverse().timesTransposeVector2(t)},transformX:function(t){var i=this.getMatrix();return i.m00()*t+i.m02()},transformY:function(t){var i=this.getMatrix();return i.m11()*t+i.m12()},transformDeltaX:function(t){var i=this.getMatrix();return i.m00()*t},transformDeltaY:function(t){var i=this.getMatrix();return i.m11()*t},transformBounds2:function(t){return t.transformed(this.matrix)},transformShape:function(t){return t.transformed(this.matrix)},transformRay2:function(t){return new i.Ray2(this.transformPosition2(t.pos),this.transformDelta2(t.dir).normalized())},inversePosition2:function(t){return this.getInverse().timesVector2(t)},inverseDelta2:function(t){var n=this.getInverse();return new i.Vector2(n.m00()*t.x+n.m01()*t.y,n.m10()*t.x+n.m11()*t.y)},inverseNormal2:function(t){return this.matrix.timesTransposeVector2(t)},inverseX:function(t){var i=this.getInverse();return i.m00()*t+i.m02()},inverseY:function(t){var i=this.getInverse();return i.m11()*t+i.m12()},inverseDeltaX:function(t){var i=this.getInverse();return i.m00()*t},inverseDeltaY:function(t){var i=this.getInverse();return i.m11()*t},inverseBounds2:function(t){return t.transformed(this.getInverse())},inverseShape:function(t){return t.transformed(this.getInverse())},inverseRay2:function(t){return new i.Ray2(this.inversePosition2(t.pos),this.inverseDelta2(t.dir).normalized())},addTransformListener:function(t){this.listeners.push(t)},prependTransformListener:function(t){this.listeners.unshift(t)},removeTransformListener:function(t){this.listeners.splice(_.indexOf(this.listeners,t),1)}},n}),n("DOT/Transform4",["require","DOT/dot","DOT/Matrix4","DOT/Vector3","DOT/Ray3"],function(t){var i=t("DOT/dot");t("DOT/Matrix4"),t("DOT/Vector3"),t("DOT/Ray3"),i.Transform4=function(t){this.set(void 0===t?i.Matrix4.IDENTITY:t)};var n=i.Transform4;return n.prototype={constructor:n,set:function(t){this.matrix=t,this.inverse=null,this.matrixTransposed=null,this.inverseTransposed=null},getMatrix:function(){return this.matrix},getInverse:function(){return null===this.inverse&&(this.inverse=this.matrix.inverted()),this.inverse},getMatrixTransposed:function(){return null===this.matrixTransposed&&(this.matrixTransposed=this.matrix.transposed()),this.matrixTransposed},getInverseTransposed:function(){return null===this.inverseTransposed&&(this.inverseTransposed=this.getInverse().transposed()),this.inverseTransposed},prepend:function(t){this.set(t.timesMatrix(this.matrix))},append:function(t){this.set(this.matrix.timesMatrix(t))},prependTransform:function(t){this.prepend(t.matrix)},appendTransform:function(t){this.append(t.matrix)},isIdentity:function(){return this.matrix.type===i.Matrix4.Types.IDENTITY},applyToCanvasContext:function(t){t.setTransform(this.matrix.m00(),this.matrix.m10(),this.matrix.m01(),this.matrix.m11(),this.matrix.m03(),this.matrix.m13())},transformPosition3:function(t){return this.matrix.timesVector3(t)},transformDelta3:function(t){return this.matrix.timesRelativeVector3(t)},transformNormal3:function(t){return this.getInverse().timesTransposeVector3(t)},transformDeltaX:function(t){return this.transformDelta3(new i.Vector3(t,0,0)).x},transformDeltaY:function(t){return this.transformDelta3(new i.Vector3(0,t,0)).y},transformDeltaZ:function(t){return this.transformDelta3(new i.Vector3(0,0,t)).z},transformRay:function(t){return new i.Ray3(this.transformPosition3(t.pos),this.transformPosition3(t.pos.plus(t.dir)).minus(this.transformPosition3(t.pos)))},inversePosition3:function(t){return this.getInverse().timesVector3(t)},inverseDelta3:function(t){return this.inversePosition3(t).minus(this.inversePosition3(i.Vector3.ZERO))},inverseNormal3:function(t){return this.matrix.timesTransposeVector3(t)},inverseDeltaX:function(t){return this.inverseDelta3(new i.Vector3(t,0,0)).x},inverseDeltaY:function(t){return this.inverseDelta3(new i.Vector3(0,t,0)).y},inverseDeltaZ:function(t){return this.inverseDelta3(new i.Vector3(0,0,t)).z},inverseRay:function(t){return new i.Ray3(this.inversePosition3(t.pos),this.inversePosition3(t.pos.plus(t.dir)).minus(this.inversePosition3(t.pos)))}},n}),n("main",["DOT/dot","DOT/Bounds2","DOT/Complex","DOT/ConvexHull2","DOT/Dimension2","DOT/EigenvalueDecomposition","DOT/LinearFunction","DOT/LUDecomposition","DOT/Matrix","DOT/Matrix3","DOT/Matrix4","DOT/Permutation","DOT/QRDecomposition","DOT/Ray2","DOT/Ray3","DOT/Rectangle","DOT/SingularValueDecomposition","DOT/Transform3","DOT/Transform4","DOT/Util","DOT/Vector2","DOT/Vector3","DOT/Vector4"],function(t){return t}),n("PHET_CORE/callSuper",["require"],function(){function t(t,i,n){!function(){var n=t.prototype[i];Function.call.apply(n,arguments)}(n)}return t}),n("PHET_CORE/collect",["require"],function(){return function(t){var i=[];return t(function(t){i.push(t)}),i}}),n("PHET_CORE/escapeHTML",["require"],function(){return function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#x27;").replace(/\//g,"&#x2F;")}}),n("PHET_CORE/inheritPrototype",["require"],function(){function t(t,i){var n=Object(i.prototype);n.constructor=t,t.prototype=n}return t}),n("PHET_CORE/loadScript",["require"],function(){return function(t){"string"==typeof t&&(t={src:t});var i=t.src,n=t.callback,s=void 0===t.async?!0:t.async,r=void 0===t.cacheBuster?!1:t.cacheBuster,e=!1,h=document.createElement("script");h.type="text/javascript",h.async=s,h.onload=h.onreadystatechange=function(){var t=this.readyState;t&&"complete"!==t&&"loaded"!==t||e||(e=!0,n&&n())},h.src=i+(r?"?random="+Math.random().toFixed(10):"");var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(h,o)}}),n("PHET_CORE/main",["require","PHET_CORE/callSuper","PHET_CORE/collect","PHET_CORE/escapeHTML","PHET_CORE/inherit","PHET_CORE/inheritPrototype","PHET_CORE/isArray","PHET_CORE/extend","PHET_CORE/loadScript","PHET_CORE/phetAllocation","PHET_CORE/Poolable"],function(t){return{callSuper:t("PHET_CORE/callSuper"),collect:t("PHET_CORE/collect"),escapeHTML:t("PHET_CORE/escapeHTML"),inherit:t("PHET_CORE/inherit"),inheritPrototype:t("PHET_CORE/inheritPrototype"),isArray:t("PHET_CORE/isArray"),extend:t("PHET_CORE/extend"),loadScript:t("PHET_CORE/loadScript"),phetAllocation:t("PHET_CORE/phetAllocation"),Poolable:t("PHET_CORE/Poolable")}}),window.has&&window.has.add("assert.dot",function(){return!1}),window.loadedDotConfig=!0,i.config({deps:["main","PHET_CORE/main"],paths:{underscore:"../../sherpa/lodash-2.0.0",DOT:".",PHET_CORE:"../common/phet-core/js",ASSERT:"../common/assert/js"},shim:{underscore:{exports:"_"}},urlArgs:(new Date).getTime()}),n("production-config",function(){}),window.dot=i("main"),window.core=i("PHET_CORE/main")}();
//# sourceMappingURL=dot.min.js.map